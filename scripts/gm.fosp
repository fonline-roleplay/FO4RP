                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    

bool LocIsModoc(uint locPid)
{
	return(locPid<=(6));
}

bool LocIsCity(uint locPid)
{
	return(locPid<=(25)||locPid==(40)||locPid==(42)||locPid==26||locPid==27||locPid==29||locPid>=96);
}

bool LocIsMasked(uint locPid)
{
	return(locPid==(41));
}

bool LocIsHidden(uint locPid)
{
	return false;
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

uint __GetColor(int r,int g,int b)
{
	r=(((r)>(255))?(255):(((r)<(0))?(0):(r)));
	g=(((g)>(255))?(255):(((g)<(0))?(0):(g)));
	b=(((b)>(255))?(255):(((b)<(0))?(0):(b)));
	return(uint((0xFF<<24)|(((r)&0xFF)<<16)|(((g)&0xFF)<<8)|((b)&0xFF)));
}

uint __GetGradient(uint colorStart,uint colorEnd,uint8 pos)
{
	pos=(((pos)>(100))?(100):(((pos)<(1))?(1):(pos)));
	
	int aS=(colorStart>>24)&0xFF,
	rS=((colorStart>>16)&0xFF),
	gS=((colorStart>>8)&0xFF),
	bS=((colorStart)&0xFF),
	
	aE=(colorEnd>>24)&0xFF,
	rE=((colorEnd>>16)&0xFF),
	gE=((colorEnd>>8)&0xFF),
	bE=((colorEnd)&0xFF); 
	
	rS=(((rE-int(rS*(pos*0.01)))>0)?(rE-int(rS*(pos*0.01))):-(rE-int(rS*(pos*0.01))));
	gS=(((gE-int(gS*(pos*0.01)))>0)?(gE-int(gS*(pos*0.01))):-(gE-int(gS*(pos*0.01))));
	bS=(((bE-int(bS*(pos*0.01)))>0)?(bE-int(bS*(pos*0.01))):-(bE-int(bS*(pos*0.01))));
	
	return __GetColor(rS,gS,bS);
}

uint __GetColor(uint8&a,uint8&r,uint8&g,uint8&b,uint color){
	a=(color>>24)&0xFF;
	r=((color>>16)&0xFF);
	g=((color>>8)&0xFF);
	b=((color)&0xFF);
	
	return 0;
}                                         

import uint GetAllPlayers(Critter@[]&crs)from"manager";
import void RestartFactions(Critter&cr,int p0,int p1,int p2)from"factions";
import void OpenCrate(Critter&player,uint type)from"map_start";
import void ShowInputBoxScreen(Critter&cr,string funcName,uint16 textLength,uint8 flags)from"main";
import void Warn(Critter&admin,int param0,int param1,int param2)from"warning";
import void SetWorkbench(Critter&cr,int p0,int p1,int p2)from"item";
import void ChangeCritterSpeed(Critter&cr)from"speed";
import void unsafe_log_2(Critter&cr,int locX,int locY,int type,string@message,int[]@p4)from"general_unsafe";
import void QuakeScreen(Map&map)from"effects";
import void PlayMusic(Map&map,string&musicName,uint pos,uint repeat)from"media";

import void FlushScreen(Critter&cr,uint fromColor,uint toColor,uint timeMs)from"effects";                                                                  

void GM_getItemsByPid(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	getItemsByPid(player,param0,param1,param2);
}

void getItemsByPid(Critter&player,int pid,int param1,int param2)
{
	Item@[]items;
	uint count=GetAllItems(pid,items);
	player.Say((11),"Count: "+count);
	
	Item@item=null;
	
	for(uint i=0;i<count;i++)
	{
		@item=items[i];
		if(!(@item!=null))
		continue;
		
		switch(item.Accessory)
		{
			case(2):
			{
				Map@map=GetMap(item.MapId);
				if(!(@map!=null))
				{
					player.Say((11),"#"+item.Id+": map "+item.MapId+" not valid");
					continue;
				}
				player.Say((11),"#"+item.Id+": map "+map.Id+" ("+item.HexX+", "+item.HexY+")");
			}
			break;
			case(1):
			{
				Critter@cr=GetCritter(item.CritId);
				if(!(@cr!=null))
				{
					player.Say((11),"#"+item.Id+": crit "+item.CritId+" not valid");
					continue;
				}
				Map@map=cr.GetMap();
				if((@map!=null))
				{
					player.Say((11),"#"+item.Id+": crit "+cr.Id+" (map "+map.Id+": "+cr.HexX+", "+cr.HexY+")");
				}
				else
				{
					player.Say((11),"#"+item.Id+": crit "+cr.Id+" (global)");
				}
			}
			break;
			case(3):
			{
				Map@map=GetMap(item.MapId);
				if(!(@map!=null))
				{
					player.Say((11),"#"+item.Id+": map "+item.MapId+" not valid");
					continue;
				}
				
				Item@cont=map.GetItem(item.ContainerId);
				if(!(@cont!=null))
				continue;
				
				player.Say((11),"#"+item.Id+": map "+map.Id+" (cont "+cont.Id+": "+cont.HexX+", "+cont.HexY+")");
			}
			break;
		}
	} 
	
}

void delItemsByPid(Critter&player,int pid,int param1,int param2)
{
	Item@[]items;
	uint count=GetAllItems(pid,items);
	
	DeleteItems(items);
	
	player.Say((11),"Deleted "+count+" items.");
}

class Replic
{
	uint Author;
	uint Speaker;
	uint8 SayType;
	string Buffer;
	Replic()
	{
		Author=0;
		Speaker=0;
		SayType=0;
		Buffer="";
	}
}

Replic[]replics;

void GM_voice(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	player.ParamBase[(91)]=param0;
	player.ParamBase[(92)]=param1;
	ShowInputBoxScreen(player,"gm@unsafe_answer_GM_voice#text",0,(0x00000001));
}

void unsafe_answer_GM_voice(Critter&player,int skill,int p1,int p2,string@message,int[]@p4)
{
	if(message.length()!=0)
	{
		Map@map=player.GetMap();
		map.SetText(player.ParamBase[(91)],player.ParamBase[(92)],((uint((0xFF<<24)|(((0x7F)&0xFF)<<16)|(((0x7F)&0xFF)<<8)|((0x7F)&0xFF)))),message);
		player.Say((11),message);
	}
}

void GM_say(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	say(player,param0,param1,param2);
}

void say(Critter&player,int param0,int param1,int param2)
{
	if(param0<1)
	{
		player.Say((11),"Wrong critter Id.");
		return;
	}
	
	Critter@cr=GetCritter(param0);
	
	if(cr is null)
	{
		player.Say((11),"Can't find critter by Id.");
		return;
	}
	
	if(param1<1||param1>11)
	{
		player.Say((11),"Wrong SayType.");
		return;
	}
	
	player.ParamBase[(91)]=cr.Id;
	player.ParamBase[(92)]=param1;
	if(param1==1)
	ShowInputBoxScreen(player,"gm@unsafe_answer_GM_say#сказать",0,(0x00000001));
	else if(param1==5)
	ShowInputBoxScreen(player,"gm@unsafe_answer_GM_say#эмоут",0,(0x00000001));
	else
	ShowInputBoxScreen(player,"gm@unsafe_answer_GM_say#текст",0,(0x00000001));
}

void unsafe_answer_GM_say(Critter&player,int skill,int p1,int p2,string@message,int[]@p4)
{
	if(message.length()!=0)
	{
		Critter@cr=GetCritter(player.ParamBase[(91)]);
		cr.Say(player.ParamBase[(92)],message);
		say(player,player.ParamBase[(91)],player.ParamBase[(92)],0);
	}
}

void answer_gm_say(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()<2||answerS.length()>64)
	{
		player.Say((11),"Wrong text length.");
		delAuthor(player.Id);
		return;
	}
	
	uint len=replics.length();
	Replic@rep=null;
	
	for(uint i=0;i<len;i++)
	{
		if(replics[i].Author!=player.Id)
		continue;
		@rep=replics[i];
		break;
	}
	if(rep is null)
	{
		player.Say((11),"Can't find replic.");
		delAuthor(player.Id);
		return;
	}
	
	Critter@cr=GetCritter(rep.Speaker);
	
	if(cr is null)
	{
		player.Say((11),"Can't find critter.");
		delAuthor(player.Id);
		return;
	}
	
	rep.Buffer+=answerS;
	
	if(answerS[answerS.length()-1]==43)
	{
		rep.Buffer.resize(rep.Buffer.length()-1);
		
		player.ShowScreen((5),0,"answer_gm_say");
		player.Say((39),"Сказать...");
		
		return;
	}
	
	cr.Say(rep.SayType,rep.Buffer);
	player.Say((11),"Ok.");
	
	delAuthor(player.Id);
}

void delAuthor(uint id)
{
	uint len=replics.length();
	
	for(uint i=0;i<len;i++)
	{
		if(replics[i].Author!=id)
		continue;
		replics.removeAt(i);
		break;
	}
}

void PlayersHP(Critter&player,int param0,int param1,int param2)
{
	Critter@[]crs;
	GetAllPlayers(crs);
	
	for(uint i=0;i<crs.length();i++)
	{
		Critter@cr=crs[i];
		if(cr is null)
		continue;
		player.Say((11),"Id: "+cr.Id+" BaseMaxHP: "+cr.StatBase[(7)]+" MaxHP: "+cr.Stat[(7)]);
	}
}

void dec15hp(Critter&player,int param0,int param1,int param2)
{
	if(param0!=0)
	{
		Critter@cr=GetCritter(param0);
		if(!(cr is null))
		{
			if(cr.StatBase[(7)]>15)
			cr.StatBase[(7)]-=15;
			else
			cr.StatBase[(7)]=0;
		}
		return;
	} 
	
	Critter@[]crs;
	GetAllPlayers(crs);
	
	for(uint i=0;i<crs.length();i++)
	{
		Critter@cr=crs[i];
		if((cr is null)||cr.StatBase[(7)]!=15)
		continue;
		cr.StatBase[(7)]=0;
		player.Say((11),"Id: "+cr.Id+"  базовые MaxHP сброшены на 0.");
	}
}

void dec75hp(Critter&player,int param0,int param1,int param2)
{
	Critter@[]crs;
	GetAllPlayers(crs);
	
	for(uint i=0;i<crs.length();i++)
	{
		Critter@cr=crs[i];
		if((cr is null)||cr.StatBase[(7)]!=75)
		continue;
		cr.StatBase[(7)]=0;
		player.Say((11),"Id: "+cr.Id+"  базовые MaxHP сброшены на 0.");
	}
} 

void sleep(Critter&player,int param0,int param1,int param2)
{
	Critter@cr=null;
	if(param0>0)
	{
		@cr=GetCritter(param0);
		if(cr is null)
		return;
	}
	else
	@cr=player;
	
	if(cr.IsKnockout())
	{
		cr.ParamBase[(75)]=0;
		if(cr.Param[(72)]>0)
		cr.ToLife();
	}
	else
	cr.ToKnockout(((param1==0)?(82):(83)),((param1==0)?(86):(87)),((param1==0)?(88):(89)),9999,cr.HexX,cr.HexY);
}

void _sinf(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	sinf(player,0,param0,0);
}

void sinf(Critter&player,int param0,int param1,int param2)
{
	Critter@cr=null;
	if(param0>0)
	{
		@cr=GetCritter(param0);
		if(cr is null)
		return;
	}
	else
	@cr=player;
	
	cr.RunClientScript("client_main@_sinf",param1,0,0,null,null);
}

uint last_s2a_author=0;

void _say2all(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	Critter@[]crs;
	GetAllPlayers(crs);
	
	string str="|0xFFFF0000 ### |0xFFBB33CC "+param3+" |0xFFFF0000 ###";
	
	uint acc=player.GetAccess();
	
	for(uint i=0,j=crs.length();i<j;i++)
	{
		if(crs[i]is null)
		continue;
		
		if(crs[i].GetAccess()>=acc)
		crs[i].Say((11),"|0xFFFF0000 <|0xFFFFFF00 "+GetPlayerName(player.Id)+"|0xFFFF0000 >"+str);
		else
		crs[i].Say((11),str);
	}
	
	last_s2a_author=player.Id;
}

void unsafe_ans(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(player.Param[(95)]>3)
	return;
	player.ParamBase[(95)]+=1;
	
	Critter@cr=GetCritter(last_s2a_author);
	if(cr is null)
	return;
	
	cr.Say((11),"s2a-answer |0xFFFF0000 <|0xFFFFFF00 "+GetPlayerName(player.Id)+"("+player.Id+")|0xFFFF0000 > |0xFFBB33CC "+param3);
}

void unsafe_help(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(player.Param[(95)]>3)
	return;
	player.ParamBase[(95)]+=1;
	
	Critter@[]crs;
	GetAllPlayers(crs);
	
	string str="help |0xFFFF0000 <|0xFFFFFF00 "+GetPlayerName(player.Id)+"("+player.Id+")|0xFFFF0000 > |0xFFBB33CC "+param3;
	
	for(uint i=0,j=crs.length();i<j;i++)
	{
		if(crs[i]is null or crs[i].GetAccess()<(2))
		continue;
		crs[i].Say((11),str);
	}
	
	file f;
	if(f.open("logs\\help_pleads.txt","a")>=0)
	{
		string date=TimeToString(player);
		
		string type;
		if(player.Param[(703)]==(0))
		type="Старт";
		else if(player.Param[(703)]==(1))
		type="Прикл.";
		else if(player.Param[(703)]==(2))
		type="Выжив.";
		else if(player.Param[(703)]==(3))
		type="Аркада";
		else if(player.Param[(703)]==(4))
		type="Тест";
		else
		type="ошибка";
		f.writeString(date+"\t"+type+"\t"+player.Id+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+param3+"\n");
		f.close();
	}
	else
	Log("can't open!");
}

void read_help(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	file f;
	if(f.open("logs\\help_pleads.txt","r")>=0)
	{
		string word="";
		uint pos=0;
		f.setPos(0);
		while(!f.isEndOfFile())
		{
			pos=f.getPos();
			f.readLine(word);
			player.Say((11),word);
		}
		f.close();
	}
	else
	Log("can't open!");
}

class Poll
{
	uint Id;
	uint InitiatorId;
	string Question;
	uint8 AnsNum;
	string[]Answers;
	uint16[]Votes;
	
	Poll()
	{
		Id=0;
		InitiatorId=0;
		AnsNum=0;
	}
	
	Poll@Set(uint id,uint initiatorId,string&question)
	{
		Id=id;
		InitiatorId=initiatorId;
		Question=question;
		return this;
	}
	Poll@Add(string&answer)
	{
		AnsNum++;
		Answers.insertLast(answer);
		Votes.insertLast(0);
		return this;
	}
	void Vote(uint num)
	{
		if(num>=AnsNum)
		return;
		Votes[num]+=1;
	}
}

Poll@[]polls;
uint poll_lastId=0;

void _poll(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(param3 is null||param3.length()<10)
	return;
	
	string@[]@parts=splitEx(param3,"@");
	
	if(parts is null||parts.length()<2||parts.length()>6||parts[0]is null||parts[1]is null)
	return; 
	
	Poll@poll=Poll().Set(poll_lastId++,player.Id,parts[0]);
	
	for(uint i=1,j=parts.length();i<j;i++)
	{
		if(parts[i]is null)
		continue;
		poll.Add(parts[i]);
	}
	polls.insertLast(@poll);
	
	Critter@[]crs;
	GetAllPlayers(crs);
	
	string str="|0xFFFF0000 # |0xFFBB33CC Началось голосование. |0xFFFF0000 #";
	
	for(uint i=0,j=crs.length();i<j;i++)
	{
		if(crs[i]is null)
		continue;
		
		crs[i].Say((11),str);
		crs[i].ParamBase[(93)]=poll.Id;
		crs[i].ShowScreen((2),poll.AnsNum,"answer_poll");
		crs[i].Say((18),poll.Question);
		for(uint k=0;k<poll.AnsNum;k++)
		{
			crs[i].Say((19+(k)),poll.Answers[k]);
		}
	}
	
	player.Say((11),"Poll Id: "+poll.Id);
}

Poll@GetPoll(uint8 num)
{
	Poll@poll=null;
	for(uint i=0;i<polls.length();i++)
	{
		if(polls[i]is null or polls[i].Id!=num)
		continue;
		@poll=polls[i];
	}
	return poll;
}

void answer_poll(Critter&cr,uint answerI,string&answerS)
{
	uint id=cr.Param[(93)];
	Poll@poll=GetPoll(uint8(id));
	if(poll is null or poll.AnsNum<=answerI)
	return;
	
	poll.Votes[answerI]+=1;
	
	Critter@gm=GetCritter(poll.InitiatorId);
	
	if(@gm!=null)
	{
		gm.Say((11),"Игрок "+GetPlayerName(cr.Id)+"("+cr.Id+") выбрал вариант "+answerI);
	}
	cr.ParamBase[(93)]=-1;
}

void poll_check(Critter&player,int param0,int param1,int param2)
{
	Poll@poll=GetPoll(uint8(param0));
	if(poll is null)
	{
		player.Say((11),"Голосование не найдено.");
		return;
	}
	
	player.Say((11),"Голосование #"+param0+": "+poll.Question);
	for(uint i=0;i<poll.AnsNum;i++)
	{
		player.Say((11),i+") "+poll.Answers[i]+" - "+poll.Votes[i]);
	}
}

void poll_end(Critter&player,int param0,int hide,int param2)
{
	Poll@poll=GetPoll(uint8(param0));
	if(poll is null)
	{
		player.Say((11),"Голосование не найдено.");
		return;
	}
	
	Critter@[]crs;
	
	if(hide>0)
	{
		crs.resize(1);
		@crs[0]=player;
	}
	else
	GetAllPlayers(crs);
	
	string str="Голосование #"+param0+": \""+poll.Question+"\" закончено.";
	string[]str0(poll.AnsNum);
	
	for(uint i=0;i<poll.AnsNum;i++)
	{
		str0[i]=i+") "+poll.Answers[i]+" - "+poll.Votes[i];
	}
	
	for(uint j=0,k=crs.length();j<k;j++)
	{
		if(crs[j]is null)
		continue;
		
		crs[j].Say((11),str);
		for(uint i=0;i<poll.AnsNum;i++)
		{
			crs[j].Say((11),str0[i]);
		}
	}
	
	@polls[poll.Id]=null;
} 

void _private(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(param0<1)
	return;
	Critter@cr=GetCritter(param0);
	if(cr is null or cr.IsNpc())
	{
		player.Say((11),"Игрок не найден.");
		return;
	}
	
	string str="|0xFFFF0000 <|0xFFFFFF00 "+((cr.GetAccess()>(1))?GetPlayerName(player.Id):((player.GetAccess()==(3))?"admin":"gm"))+"|0xFFFF0000 > |0xFFCC33AA "+param3;
	
	cr.Say((11),str);
	player.Say((11),"Отправлено.");
}

void GM_name(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(param0<1)
	return;
	player.Say((11),"Id: "+param0+" Login: "+GetPlayerName(param0));
}

void name(Critter&cr,int crId,int num,int val)
{
	if(crId<1)
	return;
	cr.Say((11),"Id: "+crId+" Login: "+GetPlayerName(crId));
} 

void GM_showVal(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	showVal(player,param0,param1,param2);
}

void showVal(Critter&cr,int itemId,int num,int val)
{
	if(itemId<1)
	return;
	
	Item@item=GetItem(itemId);
	if(item is null)
	return;
	
	cr.Say((11),"ItemId: "+item.Id);
	cr.Say((11),"Val0: "+item.Val0);
	cr.Say((11),"Val1: "+item.Val1);
	cr.Say((11),"Val2: "+item.Val2);
	cr.Say((11),"Val3: "+item.Val3);
	cr.Say((11),"Val4: "+item.Val4);
	cr.Say((11),"Val5: "+item.Val5);
	cr.Say((11),"Val6: "+item.Val6);
	cr.Say((11),"Val7: "+item.Val7);
	cr.Say((11),"Val8: "+item.Val8);
	cr.Say((11),"Val9: "+item.Val9);
}

void give(Critter&player,int crId,int itemId,int p2)
{
	Critter@cr=GetCritter(crId);
	if(cr is null)
	return;
	
	Item@item=GetItem(itemId);
	if(item is null)
	return;
	
	uint count=1;
	if(item.IsStackable())
	{
		count=item.GetCount();
		if(p2>0&&p2<count)
		count=p2;
	}
	MoveItem(item,count,cr);
}

void _gmlex(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(param0<1)
	return;
	Critter@cr=GetCritter(param0);
	if(cr is null or cr.IsNpc())
	{
		player.Say((11),"Игрок не найден.");
		return;
	}
	
	cr.SetLexems(param3);
	player.Say((11),"Лексема присвоена.");
}

void _gmitemlex(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(param0<1)
	return;
	Item@item=GetItem(param0);
	if(!(@item!=null))
	{
		player.Say((11),"Игрок не найден.");
		return;
	}
	
	item.SetLexems(param3);
	player.Say((11),"Лексема присвоена.");
} 

void unsafe_ADVENTURER_PANNEL_CRITTER(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	if(player.IsPlayer())
	{
		player.StatBase[(90)]=param0;
		player.ShowScreen((2),7,"unsafe_answer_ADVENTURER_PANNEL_CRITTER");
		player.Say((18),"Выберите предупреждение");
		player.Say((19+(0)),"сленг");
		player.Say((19+(1)),"повергейминг");
		player.Say((19+(2)),"выход из роли");
		player.Say((19+(3)),"мародерство");
		player.Say((19+(4)),"клептомания");
		player.Say((19+(5)),"метагейм");
		player.Say((19+(6)),"мультоводство");
	}
}

void unsafe_answer_ADVENTURER_PANNEL_CRITTER(Critter&cr,uint answerI,string&answerS)
{
	Critter@target=GetCritter(cr.Stat[(90)]);
	if(target is null or target.IsNpc())
	{
		cr.Say((11),"Игрок не найден.");
		return;
	}
	if(cr.Param[(95)]>3)
	return;
	cr.ParamBase[(95)]+=1;
	string plead;
	if(answerI==0)
	{
		target.ShowScreen((2),0,"unsafe_answer_NULL");
		target.Say((18),"НА СЕРВЕРЕ ЗАПЕРЩЕН СЛЕНГ И НЕИГРОВОЕ ОБЩЕНИЕ");
		plead=" - сленг";
	}
	else if(answerI==1)
	{
		target.ShowScreen((2),0,"unsafe_answer_NULL");
		target.Say((18),"НЕ СТРОЙТЕ ИЗ СЕБЯ РЕМБО, ПОМНИТЕ ОБ ИНСТИНКТЕ САМОСОХРАНЕНИЯ");
		plead=" - рембо";
	}
	else if(answerI==2)
	{
		target.ShowScreen((2),0,"unsafe_answer_NULL");
		target.Say((18),"ПРИДЕРЖИВАЙТЕСЬ СВОЕЙ ИГРОВОЙ РОЛИ");
		plead=" - несоответствие роли";
	}
	else if(answerI==3)
	{
		target.ShowScreen((2),0,"unsafe_answer_NULL");
		target.Say((18),"БЕЗСИСТЕМНОЕ ЛУТАНИЕ ТРУПОВ ЭТО МАРОДЕРСТВО, ОСТАНОВИТЕСЬ");
		plead=" - мародерство";
	}
	else if(answerI==4)
	{
		target.ShowScreen((2),0,"unsafe_answer_NULL");
		target.Say((18),"НЕ ШАРЬТЕСЬ ГДЕ ПОПАЛО, ПРИСТРЕЛЯТ ЗА ВОРОВСТВО");
		plead=" - клептомания";
	}
	else if(answerI==5)
	{
		target.ShowScreen((2),0,"unsafe_answer_NULL");
		target.Say((18),"ИСПОЛЬЗОВАНИЕ ИНФОРМАЦИИ ПОЛУЧЕННОЙ НЕИГРОВЫМ ПУТЕМ ЗАПРЕЩЕНО");
		plead=" - метагейм";
	}
	else if(answerI==6)
	{
		target.ShowScreen((2),0,"unsafe_answer_NULL");
		target.Say((18),"ЗАПРЕЩЕНО ВЗАИМОДЕЙСТВИЕ МЕЖДУ СВОИМИ ПЕРСОНАЖАМИ");
		plead=" - мультоводство";
	}
	if(plead!="")
	{
		cr.Say((11),"предупреждение выдано");
		Critter@[]crs;
		GetAllPlayers(crs);
		string str="жалоба от |0xFFFF0000 <|0xFFFFFF00 "+GetPlayerName(cr.Id)+"("+cr.Id+") на "+GetPlayerName(target.Id)+"("+target.Id+")|0xFFFF0000 > |0xFFBB33CC "+plead;
		for(uint i=0,j=crs.length();i<j;i++)
		{
			if(crs[i]is null or crs[i].GetAccess()<(2))
			continue;
			crs[i].Say((11),str);
		}
		file f;
		if(f.open("logs\\warnings.txt","a")>=0)
		{
			f.writeString("жалоба от "+GetPlayerName(cr.Id)+"\t"+"\t"+cr.Id+"\t"+" на "+GetPlayerName(target.Id)+"\t"+"\t"+target.Id+"\t"+plead+"\n");
			f.close();
		}
	}
}

void unsafe_answer_NULL(Critter&cr,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		cr.Say((11),"тест");
	}
	return;
} 

void GM_PANNEL_SELF(Critter&player,int crId,int param1,int param2,string@param3,int[]@param4)
{
	if(player.GetAccess()>=(2))
	{
		player.ShowScreen((2),10,"answer_GM_PANNEL_SELF");
		player.Say((18),"ГМ ПАНЕЛЬ");
		player.Say((19+(0)),"Режимы себя");
		player.Say((19+(1)),"Режимы города");
		player.Say((19+(2)),"Смотреть Логи");
		player.Say((19+(3)),"По ID");
		player.Say((19+(4)),"Склад");
		player.Say((19+(5)),"Чарлисты");
		player.Say((19+(6)),"Телепорт");
		player.Say((19+(7)),"Спавны1");
		player.Say((19+(8)),"Спавны2");
		player.Say((19+(9)),"убр.лишних мобов");
	}
}

void answer_GM_PANNEL_SELF(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		player.ShowScreen((2),6,"answer_GM_PANNEL_SELF_MYMODES");
		player.Say((18),"Выберите режимы");
		player.Say((19+(0)),"ред. как игрока");
		if(player.ParamBase[(527)]==0)
		player.Say((19+(1)),"+ неуязвимость");
		else
		player.Say((19+(1)),"- неуязвимость");
		if(player.ParamBase[(702)]==0)
		player.Say((19+(2)),"+ всевидение");
		else
		player.Say((19+(2)),"- всевидение");
		if(player.ParamBase[(514)]==0)
		player.Say((19+(3)),"+ nopvp");
		else
		player.Say((19+(3)),"- nopvp");
		player.Say((19+(4)),"обзор ID");
		player.Say((19+(5)),"назад");
	}
	if(answerI==1)
	{
		GameVar@Reg=GetGlobalVar((7344));
		player.ShowScreen((2),6,"answer_GM_PANNEL_SELF_TOWNMODES");
		player.Say((18),"Выберите режимы");
		player.Say((19+(0)),"воен положение");
		player.Say((19+(1)),"активность гвард");
		player.Say((19+(2)),"расизм");
		player.Say((19+(3)),"шлюз");
		if(Reg.GetValue()==0)
		player.Say((19+(4)),"закрыть регистрацию");
		else
		player.Say((19+(4)),"открыть регистрацию");
		player.Say((19+(5)),"назад");
	}
	if(answerI==2)
	{
		player.ShowScreen((2),11,"answer_GM_PANNEL_SELF_LOG");
		player.Say((18),"Что желаешь хозяин?");
		player.Say((19+(0)),"скачать help");
		player.Say((19+(1)),"скачать warn");
		player.Say((19+(2)),"скачать kill");
		player.Say((19+(3)),"скачать factions");
		player.Say((19+(4)),"скачать bans");
		player.Say((19+(5)),"скачать crims");
		if(player.GetAccess()>(2))
		player.Say((19+(9)),"очистить лог");
		player.Say((19+(10)),"назад");
	}
	if(answerI==3)
	{
		player.ShowScreen((2),7,"answer_GM_PANNEL_SELF_ID");
		player.Say((18),"Действия по ID");
		player.Say((19+(0)),"Режимы игры");
		player.Say((19+(1)),"Фракции/пропуски");
		player.Say((19+(2)),"Смотреть анкету");
		player.Say((19+(3)),"Инвентарь");
		player.Say((19+(4)),"Бан");
		player.Say((19+(5)),"Разбан");
		player.Say((19+(6)),"назад");
	}
	if(answerI==4)
	{
		player.ShowScreen((2),10,"answer_GM_PANNEL_SELF_VAULT");
		player.Say((18),"Склад");
		player.Say((19+(0)),"оружие");
		player.Say((19+(1)),"броня");
		player.Say((19+(2)),"патроны");
		player.Say((19+(3)),"инструменты");
		player.Say((19+(4)),"разное");
		player.Say((19+(5)),"+эквип");
		player.Say((19+(6)),"+патроны");
		player.Say((19+(7)),"+инструменты");
		player.Say((19+(8)),"социальное");
		player.Say((19+(9)),"назад");
	}
	if(answerI==5)
	{
		player.ShowScreen((2),6,"answer_GM_PANNEL_SELF_CHARLIST");
		player.Say((18),"Склад");
		player.Say((19+(0)),"Скачать");
		player.Say((19+(1)),"Одобрить по ID");
		player.Say((19+(2)),"Отказать по ID");
		player.Say((19+(3)),"Бан по ID");
		player.Say((19+(4)),"Редактировать");
		player.Say((19+(5)),"назад");
	}
	if(answerI==6)
	{
		Map@map=player.GetMap();
		int x=player.WorldX*0.1,y=player.WorldY*0.1;
		player.ShowScreen((2),11,"answer_GM_PANNEL_SELF_TELEPORT");
		player.Say((18),"Ваши координаты, х="+x+", y="+y+" , игроков на карте = "+map.GetData(0));
		player.Say((19+(0)),"Модок");
		player.Say((19+(1)),"Свалка");
		player.Say((19+(2)),"Свалка нижн");
		player.Say((19+(3)),"Феникс");
		player.Say((19+(4)),"Феникс нижн");
		player.Say((19+(5)),"Саттер");
		player.Say((19+(6)),"Старт карта");
		player.Say((19+(7)),"Dream");
		player.Say((19+(8)),"Рай");
		player.Say((19+(9)),"в координаты");
		player.Say((19+(10)),"назад");
	}
	if(answerI==7)
	{
		Map@map=player.GetMap();
		uint16[]max_count={GetLocalVar((310),map.Id).GetValue(),
			GetLocalVar((311),map.GetProtoId()).GetValue(),
			GetLocalVar((312),map.Id).GetValue(),
			GetLocalVar((313),map.Id).GetValue(),
			GetLocalVar((314),map.Id).GetValue(),
			GetLocalVar((315),map.Id).GetValue(),
			GetLocalVar((316),map.Id).GetValue(),
			GetLocalVar((317),map.Id).GetValue(),
			GetLocalVar((318),map.Id).GetValue(),
			GetLocalVar((319),map.Id).GetValue(),
			GetLocalVar((320),map.Id).GetValue(),
			GetLocalVar((321),map.Id).GetValue(),
			GetLocalVar((322),map.Id).GetValue()};
		player.ShowScreen((2),13,"answer_GM_PANNEL_SELF_MAPSPAWN1");
		player.Say((18),"Спавны текущей карты:");
		player.Say((19+(0)),""+max_count[0]+" крысы");
		player.Say((19+(1)),""+max_count[1]+" мантисы");
		player.Say((19+(2)),""+max_count[2]+" муравьи");
		player.Say((19+(3)),""+max_count[3]+" свинокрыс");
		player.Say((19+(4)),""+max_count[4]+" кротокрысы");
		player.Say((19+(5)),""+max_count[5]+" кроты гризли");
		player.Say((19+(6)),""+max_count[6]+" кротокр мут");
		player.Say((19+(7)),""+max_count[7]+" гекко");
		player.Say((19+(8)),""+max_count[8]+" зол гекко");
		player.Say((19+(9)),""+max_count[9]+" волки");
		player.Say((19+(10)),""+max_count[10]+" м.скорп");
		player.Say((19+(11)),""+max_count[11]+" б.скорп");
		player.Say((19+(12)),""+max_count[12]+" растение");
	}
	if(answerI==8)
	{
		Map@map=player.GetMap();
		uint16[]max_count={GetLocalVar((323),map.Id).GetValue(),
			GetLocalVar((324),map.Id).GetValue(),
			GetLocalVar((325),map.Id).GetValue(),
			GetLocalVar((326),map.Id).GetValue(),
			GetLocalVar((327),map.Id).GetValue(),
			GetLocalVar((328),map.Id).GetValue(),
			GetLocalVar((329),map.Id).GetValue(),
			GetLocalVar((330),map.Id).GetValue(),
			GetLocalVar((335),map.Id).GetValue(),
			GetLocalVar((336),map.Id).GetValue(),
			GetLocalVar((337),map.Id).GetValue(),
			GetLocalVar((338),map.Id).GetValue(),
			GetLocalVar((339),map.Id).GetValue(),
			GetLocalVar((340),map.Id).GetValue(),
			GetLocalVar((341),map.Id).GetValue()};
		player.ShowScreen((2),12,"answer_GM_PANNEL_SELF_MAPSPAWN2");
		player.Say((18),"Спавны текущей карты:");
		player.Say((19+(0)),""+max_count[0]+" чужой");
		player.Say((19+(1)),""+max_count[1]+" м.коготь");
		player.Say((19+(2)),""+max_count[2]+" б.коготь");
		player.Say((19+(3)),""+max_count[3]+" сер.коготь");
		player.Say((19+(4)),""+max_count[4]+" огнегекко");
		player.Say((19+(5)),""+max_count[5]+" кентавр");
		player.Say((19+(6)),""+max_count[6]+" летатель");
		player.Say((19+(7)),""+max_count[7]+" болотник");
		player.Say((19+(8)),""+max_count[8]+" потрошитель");
		player.Say((19+(9)),""+max_count[9]+" ж.потрошитель");
		player.Say((19+(10)),""+max_count[10]+" бандит");
		player.Say((19+(11)),""+max_count[11]+" бандитка");
	}
	if(answerI==9)
	{
		Map@map=player.GetMap();
		uint16[]max_count={GetLocalVar((310),map.Id).GetValue(),
			GetLocalVar((311),map.Id).GetValue(),
			GetLocalVar((312),map.Id).GetValue(),
			GetLocalVar((313),map.Id).GetValue(),
			GetLocalVar((314),map.Id).GetValue(),
			GetLocalVar((315),map.Id).GetValue(),
			GetLocalVar((316),map.Id).GetValue(),
			GetLocalVar((317),map.Id).GetValue(),
			GetLocalVar((318),map.Id).GetValue(),
			GetLocalVar((319),map.Id).GetValue(),
			GetLocalVar((320),map.Id).GetValue(),
			GetLocalVar((321),map.Id).GetValue(),
			GetLocalVar((322),map.Id).GetValue(),
			GetLocalVar((323),map.Id).GetValue(),
			GetLocalVar((324),map.Id).GetValue(),
			GetLocalVar((325),map.Id).GetValue(),
			GetLocalVar((326),map.Id).GetValue(),
			GetLocalVar((327),map.Id).GetValue(),
			GetLocalVar((328),map.Id).GetValue(),
			GetLocalVar((329),map.Id).GetValue(),
			GetLocalVar((330),map.Id).GetValue(),
			GetLocalVar((335),map.Id).GetValue(),
			GetLocalVar((336),map.Id).GetValue(),
			GetLocalVar((337),map.Id).GetValue(),
			GetLocalVar((338),map.Id).GetValue(),
			GetLocalVar((339),map.Id).GetValue(),
			GetLocalVar((340),map.Id).GetValue(),
			GetLocalVar((341),map.Id).GetValue(),
			GetLocalVar((342),map.Id).GetValue(),
			GetLocalVar((343),map.Id).GetValue(),
			GetLocalVar((344),map.Id).GetValue(),
			GetLocalVar((345),map.Id).GetValue(),
			GetLocalVar((346),map.Id).GetValue(),
			GetLocalVar((347),map.Id).GetValue(),
			GetLocalVar((348),map.Id).GetValue(),
			GetLocalVar((349),map.Id).GetValue()};
		
		Critter@[]critters;
		for(uint i=0,j=max_count.length();i<j;i++)
		{
			map.GetCritters(310+i,(0x0F)|(0x20),critters);
			for(uint ii=0,jj=critters.length()-max_count[i];ii<jj;ii++)
			{
				DeleteNpc(critters[ii]);
			}
			critters.resize(0);
		}
	}
}

void answer_GM_PANNEL_SELF_MAPSPAWN1(Critter&player,uint answerI,string&answerS)
{
	player.ParamBase[(90)]=answerI;
	player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_MAPSPAWN");
	player.Say((39),"количество");
}

void answer_GM_PANNEL_SELF_MAPSPAWN2(Critter&player,uint answerI,string&answerS)
{
	player.ParamBase[(90)]=answerI+13;
	player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_MAPSPAWN");
	player.Say((39),"количество");
}

void ask_GM_PANNEL_SELF_MAPSPAWN(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		
		Map@map=player.GetMap();
		int var_type=player.ParamBase[(90)];
		switch(var_type)
		{
			case 0:GetLocalVar((310),map.Id).opAssign(number);break;
			case 1:GetLocalVar((311),map.Id).opAssign(number);break;
			case 2:GetLocalVar((312),map.Id).opAssign(number);break;
			case 3:GetLocalVar((313),map.Id).opAssign(number);break;
			case 4:GetLocalVar((314),map.Id).opAssign(number);break;
			case 5:GetLocalVar((315),map.Id).opAssign(number);break;
			case 6:GetLocalVar((316),map.Id).opAssign(number);break;
			case 7:GetLocalVar((317),map.Id).opAssign(number);break;
			case 8:GetLocalVar((318),map.Id).opAssign(number);break;
			case 9:GetLocalVar((319),map.Id).opAssign(number);break;
			case 10:GetLocalVar((320),map.Id).opAssign(number);break;
			case 11:GetLocalVar((321),map.Id).opAssign(number);break;
			case 12:GetLocalVar((322),map.Id).opAssign(number);break;
			case 13:GetLocalVar((323),map.Id).opAssign(number);break;
			case 14:GetLocalVar((324),map.Id).opAssign(number);break;
			case 15:GetLocalVar((325),map.Id).opAssign(number);break;
			case 16:GetLocalVar((326),map.Id).opAssign(number);break;
			case 17:GetLocalVar((327),map.Id).opAssign(number);break;
			case 18:GetLocalVar((328),map.Id).opAssign(number);break;
			case 19:GetLocalVar((329),map.Id).opAssign(number);break;
			case 20:GetLocalVar((330),map.Id).opAssign(number);break;
			case 21:GetLocalVar((335),map.Id).opAssign(number);break;
			case 22:GetLocalVar((336),map.Id).opAssign(number);break;
			case 23:GetLocalVar((337),map.Id).opAssign(number);break;
			case 24:GetLocalVar((338),map.Id).opAssign(number);break;
			case 25:GetLocalVar((339),map.Id).opAssign(number);break;
			case 26:GetLocalVar((340),map.Id).opAssign(number);break;
			case 27:GetLocalVar((341),map.Id).opAssign(number);break;
			case 28:GetLocalVar((342),map.Id).opAssign(number);break;
			case 29:GetLocalVar((343),map.Id).opAssign(number);break;
			case 30:GetLocalVar((344),map.Id).opAssign(number);break;
			case 31:GetLocalVar((345),map.Id).opAssign(number);break;
			case 32:GetLocalVar((346),map.Id).opAssign(number);break;
			case 33:GetLocalVar((347),map.Id).opAssign(number);break;
			case 34:GetLocalVar((348),map.Id).opAssign(number);break;
			case 35:GetLocalVar((349),map.Id).opAssign(number);break;
		}
		
		if(var_type<=12)
		{
			uint16[]max_count={GetLocalVar((310),map.Id).GetValue(),
				GetLocalVar((311),map.Id).GetValue(),
				GetLocalVar((312),map.Id).GetValue(),
				GetLocalVar((313),map.Id).GetValue(),
				GetLocalVar((314),map.Id).GetValue(),
				GetLocalVar((315),map.Id).GetValue(),
				GetLocalVar((316),map.Id).GetValue(),
				GetLocalVar((317),map.Id).GetValue(),
				GetLocalVar((318),map.Id).GetValue(),
				GetLocalVar((319),map.Id).GetValue(),
				GetLocalVar((320),map.Id).GetValue(),
				GetLocalVar((321),map.Id).GetValue(),
				GetLocalVar((322),map.Id).GetValue()};
			player.ShowScreen((2),12,"answer_GM_PANNEL_SELF_MAPSPAWN1");
			player.Say((18),"Спавны текущей карты:");
			player.Say((19+(0)),""+max_count[0]+" крысы");
			player.Say((19+(1)),""+max_count[1]+" мантисы");
			player.Say((19+(2)),""+max_count[2]+" муравьи");
			player.Say((19+(3)),""+max_count[3]+" кротокрысы");
			player.Say((19+(4)),""+max_count[4]+" кроты гризли");
			player.Say((19+(5)),""+max_count[5]+" кротокр мут");
			player.Say((19+(6)),""+max_count[6]+" гекко");
			player.Say((19+(7)),""+max_count[7]+" зол гекко");
			player.Say((19+(8)),""+max_count[8]+" волки");
			player.Say((19+(9)),""+max_count[9]+" м.скорп");
			player.Say((19+(10)),""+max_count[10]+" б.скорп");
			player.Say((19+(11)),""+max_count[11]+" растение");
		}
		else
		{
			uint16[]max_count={GetLocalVar((323),map.Id).GetValue(),
				GetLocalVar((324),map.Id).GetValue(),
				GetLocalVar((325),map.Id).GetValue(),
				GetLocalVar((326),map.Id).GetValue(),
				GetLocalVar((327),map.Id).GetValue(),
				GetLocalVar((328),map.Id).GetValue(),
				GetLocalVar((329),map.Id).GetValue(),
				GetLocalVar((330),map.Id).GetValue(),
				GetLocalVar((335),map.Id).GetValue(),
				GetLocalVar((336),map.Id).GetValue(),
				GetLocalVar((337),map.Id).GetValue(),
				GetLocalVar((338),map.Id).GetValue(),
				GetLocalVar((339),map.Id).GetValue(),
				GetLocalVar((340),map.Id).GetValue(),
				GetLocalVar((341),map.Id).GetValue()};
			player.ShowScreen((2),12,"answer_GM_PANNEL_SELF_MAPSPAWN2");
			player.Say((18),"Спавны текущей карты:");
			player.Say((19+(0)),""+max_count[0]+" чужой");
			player.Say((19+(1)),""+max_count[1]+" м.коготь");
			player.Say((19+(2)),""+max_count[2]+" б.коготь");
			player.Say((19+(3)),""+max_count[3]+" сер.коготь");
			player.Say((19+(4)),""+max_count[4]+" огнегекко");
			player.Say((19+(5)),""+max_count[5]+" кентавр");
			player.Say((19+(6)),""+max_count[6]+" летатель");
			player.Say((19+(7)),""+max_count[7]+" болотник");
			player.Say((19+(8)),""+max_count[8]+" потрошитель");
			player.Say((19+(9)),""+max_count[9]+" ж.потрошитель");
			player.Say((19+(10)),""+max_count[10]+" бандит");
			player.Say((19+(11)),""+max_count[11]+" бандитка");
		}
	}
}

void answer_GM_PANNEL_SELF_TELEPORT(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		player.ShowScreen((2),13,"answer_GM_PANNEL_SELF_TELEPORT_MODOC");
		player.Say((18),"Склад");
		player.Say((19+(0)),"1 Богатый");
		player.Say((19+(1)),"2 Администр");
		player.Say((19+(2)),"3 Лесопилка");
		player.Say((19+(3)),"4 Бедный");
		player.Say((19+(4)),"5 Ворота");
		player.Say((19+(5)),"6 ");
		player.Say((19+(6)),"7 ");
		player.Say((19+(7)),"8 ");
		player.Say((19+(8)),"9 ");
		player.Say((19+(9)),"10 ");
		player.Say((19+(10)),"11 ");
		player.Say((19+(11)),"12 ");
		player.Say((19+(12)),"назад");
	}
	if(answerI==1)
	{
		Location@loc=GetLocationByPid(42,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==2)
	{
		Location@loc=GetLocationByPid(42,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(1);
		player.TransitToMap(map.Id,player.HexX,player.HexY,0);
	}
	if(answerI==3)
	{
		Location@loc=GetLocationByPid(41,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==4)
	{
		Location@loc=GetLocationByPid(41,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(1);
		player.TransitToMap(map.Id,player.HexX,player.HexY,0);
	}
	if(answerI==5)
	{
		Location@loc=GetLocationByPid(13,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,player.HexX,player.HexY,0);
	}
	if(answerI==6)
	{
		Location@loc=GetLocationByPid(92,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,player.HexX,player.HexY,0);
	}
	if(answerI==7)
	{
		Location@loc=GetLocationByPid(93,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,player.HexX,player.HexY,0);
	}
	if(answerI==8)
	{
		Location@loc=GetLocationByPid((95),0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,player.HexX,player.HexY,0);
	}
	if(answerI==9)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
	if(answerI==10)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
}

void answer_GM_PANNEL_SELF_TELEPORT_MODOC(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		Location@loc=GetLocationByPid(1,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==1)
	{
		Location@loc=GetLocationByPid(2,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==2)
	{
		Location@loc=GetLocationByPid(3,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==3)
	{
		Location@loc=GetLocationByPid(4,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==4)
	{
		Location@loc=GetLocationByPid(5,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==5)
	{
		Location@loc=GetLocationByPid(6,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==6)
	{
		Location@loc=GetLocationByPid(7,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==7)
	{
		Location@loc=GetLocationByPid(8,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==8)
	{
		Location@loc=GetLocationByPid(9,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==9)
	{
		Location@loc=GetLocationByPid(10,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==10)
	{
		Location@loc=GetLocationByPid(11,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==11)
	{
		Location@loc=GetLocationByPid(12,0);
		if(loc is null)
		{
			player.Say((11),"нет локации.");
			return;
		}
		Map@map=loc.GetMapByIndex(0);
		player.TransitToMap(map.Id,0);
	}
	if(answerI==12)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
}

void answer_GM_PANNEL_SELF_CHARLIST(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		GameVar@TotalPlayers=GetGlobalVar((4));
		for(uint i=1;i<=TotalPlayers;i++)
		{
			GameVar@request=GetLocalVar((6101),i);
			GameVar@activation=GetLocalVar((6100),i);
			if(activation.GetValue()>request.GetValue())
			{
				file f;
				if(f.open("adventurers\\"+i+".txt","r")>=0)
				{
					string word="";
					uint pos=0;
					uint line=0;
					f.setPos(0);
					while(!f.isEndOfFile())
					{
						pos=f.getPos();
						if(pos==0)
						{
							f.readLine(word);
							if(word.length()>0)
							player.RunClientScript("client_main@loger",0,6,i,word,null);
						}
						else
						{
							line+=1;
							f.readLine(word);
							player.RunClientScript("client_main@loger",line,6,i,word,null);
						}
					}
					f.close();
				}
			}
			else if(activation.GetValue()==-1)
			{
				file f;
				if(f.open("adventurers\\"+i+".txt","r")>=0)
				{
					string word="";
					uint pos=0;
					uint line=0;
					f.setPos(0);
					while(!f.isEndOfFile())
					{
						pos=f.getPos();
						if(pos==0)
						{
							f.readLine(word);
							if(word.length()>0)
							player.RunClientScript("client_main@loger",0,7,i,word,null);
						}
						else
						{
							line+=1;
							f.readLine(word);
							player.RunClientScript("client_main@loger",line,7,i,word,null);
						}
					}
					f.close();
				}
			}
			else
			{
				file f;
				if(f.open("adventurers\\"+i+".txt","r")>=0)
				{
					string word="";
					uint pos=0;
					uint line=0;
					f.setPos(0);
					while(!f.isEndOfFile())
					{
						pos=f.getPos();
						if(pos==0)
						{
							f.readLine(word);
							if(word.length()>0)
							player.RunClientScript("client_main@loger",0,5,i,word,null);
						}
						else
						{
							line+=1;
							f.readLine(word);
							player.RunClientScript("client_main@loger",line,5,i,word,null);
						}
					}
					f.close();
				}
			}
		}
		player.Say((11),"Чарлисты записаны.");
	}
	if(answerI==1)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_CHARLIST_aprove");
		player.Say((39),"Ид на одобрение");
	}
	if(answerI==2)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_CHARLIST_disaprove");
		player.Say((39),"Ид на отказ");
	}
	if(answerI==3)
	{
		player.Say((11),"в разработке.");
	}
	if(answerI==4)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_CHARLIST_redact");
		player.Say((39),"Ид на редактирование");
	}
	if(answerI==5)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
}

void ask_GM_PANNEL_SELF_CHARLIST_redact(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(!(@GetCritter(number)!=null))
		player.Say((11),"персонажа "+GetPlayerName(number)+"  "+number+" нет онлайн ");
		player.ParamBase[(91)]=number;
		GameVar@request=GetLocalVar((6101),number);
		GameVar@activation=GetLocalVar((6100),number);
		if(activation.GetValue()>request.GetValue())
		player.Say((11),"Ранее был одобрен.");
		else if(activation.GetValue()==-1)
		{
			player.Say((11),"Уже было отказан.");
			return;
		}
		player.ShowScreen((2),3,"answer_GM_PANNEL_SELF_CHARLIST_redact");
		player.Say((18),"Выберите действие с чарсетом номер "+request.GetValue()+" на персонажа "+GetPlayerName(number)+"  "+number);
		player.Say((19+(0)),"Считать чарсет");
		player.Say((19+(1)),"Записать чарсет");
		player.Say((19+(2)),"Перейти к одобрению");
	}
}

void answer_GM_PANNEL_SELF_CHARLIST_redact(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		file f;
		if(f.open("adventurers\\"+player.ParamBase[(91)]+".txt","r")>=0)
		{
			Item@[]items;
			player.GetItems((0),items);
			player.GetItems((1),items);
			player.GetItems((2),items);
			DeleteItems(items);
			
			Item@item;
			string text="";
			uint pos=0;
			uint line=0;
			int number=0;
			int count=0;
			bool isCount=true;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				line++;
				f.readLine(text);
				text.resize(text.length()-1);
				StrToInt(text,number);
				if(line==2)
				{
					if(text=="Человек")player.ChangeCrType(69);
					else if(text=="Супермутант")player.ChangeCrType(21);
					else if(text=="Гуль")player.ChangeCrType(28);
				}
				else if(line>=6&&line<=12)
				{
					player.ParamBase[line-6]=number;
				}
				else if(line>=14&&line<=31)
				{
					player.ParamBase[line+186]=number;
				}
				else if(line>=34)
				{
					Log("line="+line+" , num="+number);
					if(number==12345)break;
					if(isCount)
					{
						count=number;
						isCount=false;
					}
					else
					{
						@item=player.AddItem(number,count);
						if(item.AmmoCount!=0)item.AmmoCount=0;
						isCount=true;
					}
				}
			}
			f.close();
			player.Say((11),"Чарсет скачан.");
		}
		else return;
	}
	if(answerI==1)
	{
		string date=TimeToString(player);
		string race="";
		if(player.ParamBase[(67)]==(4))
		race="Гуль";
		else if(player.ParamBase[(67)]==(3))
		race="Супермутант";
		else
		race="Человек";
		string pass="";
		GameVar@citizenship=GetLocalVar((7300),player.ParamBase[(91)]);
		if(citizenship.GetValue()==0)
		pass="чужак";
		else if(citizenship.GetValue()==11)
		pass="гость";
		else if(citizenship.GetValue()==12)
		pass="гражданин";
		GameVar@request=GetLocalVar((6101),player.ParamBase[(91)]);
		file f;
		if(f.open("adventurers\\"+player.Id+".txt","w")>=0)
		{
			f.writeString(request.GetValue()+"\n"+
			race+"  -  "+pass+"\n"+
			date+"\n"+
			GetPlayerName(player.Id)+"\n"+
			"\n"+
			player.ParamBase[0]+"\n"+
			player.ParamBase[1]+"\n"+
			player.ParamBase[2]+"\n"+
			player.ParamBase[3]+"\n"+
			player.ParamBase[4]+"\n"+
			player.ParamBase[5]+"\n"+
			player.ParamBase[6]+"\n"+"\n"+
			player.ParamBase[200]+"\n"+
			player.ParamBase[201]+"\n"+
			player.ParamBase[202]+"\n"+
			player.ParamBase[203]+"\n"+
			player.ParamBase[204]+"\n"+
			player.ParamBase[205]+"\n"+
			player.ParamBase[206]+"\n"+
			player.ParamBase[207]+"\n"+
			player.ParamBase[208]+"\n"+
			player.ParamBase[209]+"\n"+
			player.ParamBase[210]+"\n"+
			player.ParamBase[211]+"\n"+
			player.ParamBase[212]+"\n"+
			player.ParamBase[213]+"\n"+
			player.ParamBase[214]+"\n"+
			player.ParamBase[215]+"\n"+
			player.ParamBase[216]+"\n"+
			player.ParamBase[217]+"\n"+"\n"+"Инвентарь"+"\n");
			
			Item@[]items;
			player.GetItems((3),items);
			player.GetItems((1),items);
			player.GetItems((2),items);
			player.GetItems((0),items);
			for(uint i=0;i<items.length();i++)
			{
				f.writeString(items[i].GetCount()+"\n");
				f.writeString(items[i].GetProtoId()+"\n");
			}
			f.writeString(12345+"\n");
			f.close();
			player.Say((11),"Чарсет записан.");
		}
	}
	if(answerI==2)
	{
		uint number=player.ParamBase[(91)];
		GameVar@request=GetLocalVar((6101),number);
		GameVar@activation=GetLocalVar((6100),number);
		string pass="";
		GameVar@citizenship=GetLocalVar((7300),number);
		if(citizenship.GetValue()==0)
		pass="чужак";
		else if(citizenship.GetValue()==11)
		pass="гость";
		else if(citizenship.GetValue()==12)
		pass="гражданин";
		if(activation.GetValue()>request.GetValue())
		{
			player.Say((11),"Уже активирован.");
			return;
		}
		else if(activation.GetValue()==-1)
		{
			player.Say((11),"Уже отказанно.");
			return;
		}
		player.ShowScreen((2),4,"answer_GM_PANNEL_SELF_CHARLIST_aprove");
		player.Say((18),"Подтвердите запрос номер "+request.GetValue()+" на активацию чарлиста "+GetPlayerName(number)+"  "+number+", выбран пропуск = "+pass);
		player.Say((19+(0)),"Подтверждаю");
		player.Say((19+(1)),"+ чужак");
		player.Say((19+(2)),"+ гость");
		player.Say((19+(3)),"+ гражданин");
		player.Say((19+(4)),"+ выживалец");
	}
} 

void ask_GM_PANNEL_SELF_CHARLIST_disaprove(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(!(@GetCritter(number)!=null))
		player.Say((11),"персонажа "+GetPlayerName(number)+"  "+number+" нет онлайн ");
		player.ParamBase[(91)]=number;
		GameVar@request=GetLocalVar((6101),number);
		GameVar@activation=GetLocalVar((6100),number);
		if(activation.GetValue()>request.GetValue())
		player.Say((11),"Ранее был одобрен.");
		else if(activation.GetValue()==-1)
		{
			player.Say((11),"Уже было отказан.");
			return;
		}
		player.ShowScreen((2),1,"answer_GM_PANNEL_SELF_CHARLIST_disaprove");
		player.Say((18),"Подтвердите отказ запроса номер "+request.GetValue()+" на чарлиста "+GetPlayerName(number)+"  "+number);
		player.Say((19+(0)),"Отказ подтверждаю");
	}
}

void answer_GM_PANNEL_SELF_CHARLIST_disaprove(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		GameVar@activation=GetLocalVar((6100),player.ParamBase[(91)]);
		activation.opAssign(-1);
		player.Say((11),"Чарсету персонажа "+GetPlayerName(player.ParamBase[(91)])+" отказанно в активации.");
	}
}

void ask_GM_PANNEL_SELF_CHARLIST_aprove(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(!(@GetCritter(number)!=null))
		player.Say((11),"персонажа "+GetPlayerName(number)+"  "+number+" нет онлайн ");
		player.ParamBase[(91)]=number;
		GameVar@request=GetLocalVar((6101),number);
		GameVar@activation=GetLocalVar((6100),number);
		string pass="";
		GameVar@citizenship=GetLocalVar((7300),player.Id);
		if(citizenship.GetValue()==0)
		pass="чужак";
		else if(citizenship.GetValue()==11)
		pass="гость";
		else if(citizenship.GetValue()==12)
		pass="гражданин";
		if(activation.GetValue()>request.GetValue())
		{
			player.Say((11),"Уже активирован.");
			return;
		}
		else if(activation.GetValue()==-1)
		{
			player.Say((11),"Уже отказанно.");
			return;
		}
		player.ShowScreen((2),4,"answer_GM_PANNEL_SELF_CHARLIST_aprove");
		player.Say((18),"Подтвердите запрос номер "+request.GetValue()+" на активацию чарлиста "+GetPlayerName(number)+"  "+number+", выбран пропуск = "+pass);
		player.Say((19+(0)),"Подтверждаю");
		player.Say((19+(1)),"+ чужак");
		player.Say((19+(2)),"+ гость");
		player.Say((19+(3)),"+ гражданин");
		player.Say((19+(4)),"+ выживалец");
	}
}

void answer_GM_PANNEL_SELF_CHARLIST_aprove(Critter&player,uint answerI,string&answerS)
{
	GameVar@citizenship=GetLocalVar((7300),player.ParamBase[(91)]);
	GameVar@activation=GetLocalVar((6100),player.ParamBase[(91)]);
	GameVar@request=GetLocalVar((6101),player.ParamBase[(91)]);
	if(citizenship.GetValue()!=0&&citizenship.GetValue()!=11&&citizenship.GetValue()!=12)
	{
		player.Say((11),"У персонажа "+GetPlayerName(player.ParamBase[(91)])+" уже есть игровой пропуск в город, проверьте ид.");
		return;
	}
	else if(answerI==0)
	{
		activation.opAssign(request.GetValue()+1);
		player.Say((11),"Чарсет персонажа "+GetPlayerName(player.ParamBase[(91)])+" одобрен.");
		Log_GM(player,player.ParamBase[(91)],(1),0,citizenship.GetValue(),0);
		file f;
		if(f.open("adventurers\\"+player.ParamBase[(91)]+".txt","a")>=0)
		{
			f.writeString("\n"+"\n"+GetPlayerName(player.Id)+"\n");
			f.close();
		}
		ShowInputBoxScreen(player,"gm@unsafe_CharsetComment#Коммент",0,(0x00000001));
	}
	else if(answerI==1)
	{
		activation.opAssign(request.GetValue()+1);
		citizenship.opAssign(0);
		player.Say((11),"Чарсет персонажа "+GetPlayerName(player.ParamBase[(91)])+" одобрен.");
		Log_GM(player,player.ParamBase[(91)],(1),1,0,0);
		file f;
		if(f.open("adventurers\\"+player.ParamBase[(91)]+".txt","a")>=0)
		{
			f.writeString("\n"+"\n"+GetPlayerName(player.Id)+"\n");
			f.close();
		}
		ShowInputBoxScreen(player,"gm@unsafe_CharsetComment#Коммент",0,(0x00000001));
	}
	else if(answerI==2)
	{
		activation.opAssign(request.GetValue()+1);
		citizenship.opAssign(11);
		player.Say((11),"Чарсет персонажа "+GetPlayerName(player.ParamBase[(91)])+" одобрен.");
		Log_GM(player,player.ParamBase[(91)],(1),2,0,0);
		file f;
		if(f.open("adventurers\\"+player.ParamBase[(91)]+".txt","a")>=0)
		{
			f.writeString("\n"+"\n"+GetPlayerName(player.Id)+"\n");
			f.close();
		}
		ShowInputBoxScreen(player,"gm@unsafe_CharsetComment#Коммент",0,(0x00000001));
	}
	else if(answerI==3)
	{
		activation.opAssign(request.GetValue()+1);
		citizenship.opAssign(12);
		player.Say((11),"Чарсет персонажа "+GetPlayerName(player.ParamBase[(91)])+" одобрен.");
		Log_GM(player,player.ParamBase[(91)],(1),3,0,0);
		file f;
		if(f.open("adventurers\\"+player.ParamBase[(91)]+".txt","a")>=0)
		{
			f.writeString("\n"+"\n"+GetPlayerName(player.Id)+"\n");
			f.close();
		}
		ShowInputBoxScreen(player,"gm@unsafe_CharsetComment#Коммент",0,(0x00000001));
	}
	else if(answerI==4)
	{
		activation.opAssign(request.GetValue()+1);
		citizenship.opAssign(13);
		player.Say((11),"Чарсет персонажа "+GetPlayerName(player.ParamBase[(91)])+" одобрен, но только для режима выживания.");
		Log_GM(player,player.ParamBase[(91)],(1),4,0,0);
		file f;
		if(f.open("adventurers\\"+player.ParamBase[(91)]+".txt","a")>=0)
		{
			f.writeString("\n"+"\n"+GetPlayerName(player.Id)+"\n");
			f.close();
		}
		ShowInputBoxScreen(player,"gm@unsafe_CharsetComment#Коммент",0,(0x00000001));
	}
}

void unsafe_CharsetComment(Critter&player,int skill,int p1,int p2,string@message,int[]@p4)
{
	if(message.length()!=0)
	{
		file f;
		if(f.open("adventurers\\"+player.ParamBase[(91)]+".txt","a")>=0)
		{
			f.writeString("-------------------------------------------------------- \n"+message+"\n"+"\n");
			f.close();
		}
	}
}

void answer_GM_PANNEL_SELF_VAULT(Critter&player,uint answerI,string&answerS)
{
	if(answerI==9)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
	else OpenCrate(player,answerI+1);
}

void answer_GM_PANNEL_SELF_ID(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		player.ShowScreen((2),5,"answer_GM_PANNEL_SELF_ID_MODES");
		player.Say((18),"Выберете назначаемый режим");
		player.Say((19+(0)),"0 старт");
		player.Say((19+(1)),"1 приключенец");
		player.Say((19+(2)),"2 выживание");
		player.Say((19+(3)),"3 аркада");
		player.Say((19+(4)),"4 тест");
	}
	if(answerI==1)
	{
		player.ShowScreen((2),13,"answer_GM_PANNEL_SELF_ID_FACTIONS");
		player.Say((18),"Выберете назначаемый режим");
		player.Say((19+(0)),"0 - без фракции");
		player.Say((19+(1)),"1 - администрация");
		player.Say((19+(2)),"2 - полиция");
		player.Say((19+(3)),"3 - мафия");
		player.Say((19+(4)),"4 - мутанты");
		player.Say((19+(5)),"5 - форт");
		player.Say((19+(6)),"6 - рейдеры");
		player.Say((19+(7)),"0 - чужак");
		player.Say((19+(8)),"1 - временный гость");
		player.Say((19+(9)),"2 - гость");
		player.Say((19+(10)),"3 - гражданин");
		player.Say((19+(11)),"4 - богатый гражданин");
		player.Say((19+(12)),"10 - изгой");
	}
	if(answerI==2)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_CHARLIST");
		player.Say((39),"Введите Ид");
	}
	if(answerI==3)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_INVENTORY");
		player.Say((39),"Введите Ид");
	}
	if(answerI==4)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_BAN");
		player.Say((39),"Бан по Ид");
	}
	if(answerI==5)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_UNBAN");
		player.Say((39),"РазБан по Ид");
	}
	if(answerI==6)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
}

void ask_GM_PANNEL_SELF_ID_BAN(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		if(!(@GetCritter(number)!=null))
		player.Say((11),"персонажа "+GetPlayerName(number)+"  "+number+" нет онлайн ");
		player.ParamBase[(91)]=number;
		
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_BAN_TIME");
		player.Say((39),"на Часов");
	}
}

void ask_GM_PANNEL_SELF_ID_BAN_TIME(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int crId=player.ParamBase[(91)];
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		BanId(player,crId,number,0);
		if((@GetCritter(crId)!=null))
		KickId(player,crId,0,0);
		player.Say((11),"персонаж "+GetPlayerName(crId)+"("+crId+")"+" заблокирован на "+number+" часов");
	}
}

void ask_GM_PANNEL_SELF_ID_UNBAN(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		if(!(@GetCritter(number)!=null))
		player.Say((11),"персонажа "+GetPlayerName(number)+"  "+number+" нет онлайн ");
		UnbanId(player,number,0,0);
		player.Say((11),"персонаж "+GetPlayerName(number)+"("+number+")"+" разблокирован");
	}
}

void ask_GM_PANNEL_SELF_ID_INVENTORY(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		if(!(@GetCritter(number)!=null))
		{
			player.Say((11),"персонажа "+GetPlayerName(number)+"  "+number+" нет онлайн ");
			return;
		}
		player.ShowContainer((GetCritter(number)),null,(8));
	}
}

void ask_GM_PANNEL_SELF_ID_CHARLIST(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		if(!(@GetCritter(number)!=null))
		player.Say((11),"персонажа "+GetPlayerName(number)+"  "+number+" нет онлайн ");
		file f;
		if(f.open("adventurers\\"+number+".txt","r")>=0)
		{
			string word="";
			uint pos=0;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				pos=f.getPos();
				if(pos==0)
				{
					f.readLine(word);
					player.RunClientScript("client_main@loger",0,5,number,word,null);
				}
				else
				{
					f.readLine(word);
					player.RunClientScript("client_main@loger",1,5,number,word,null);
				}
			}
			player.Say((11),"чарлист игрока "+GetPlayerName(number)+"  "+number+" записан");
			f.close();
		}
		else
		Log("can't open!");
	}
}

void answer_GM_PANNEL_SELF_ID_MODES(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		player.ParamBase[(91)]=0;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_MODES");
		player.Say((39),"Ид - старт фракц");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=1;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_MODES");
		player.Say((39),"Ид - приключенец");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=2;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_MODES");
		player.Say((39),"Ид - выживание");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=3;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_MODES");
		player.Say((39),"Ид - аркада");
	}
	if(answerI==4)
	{
		player.ParamBase[(91)]=4;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_MODES");
		player.Say((39),"Ид - тест");
	}
}

void ask_GM_PANNEL_SELF_ID_MODES(Critter&player,uint answerI,string&answerS)
{
	int mode=player.ParamBase[(91)];
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		Critter@target=GetCritter(number);
		if(!(@target!=null))
		{
			player.Say((11),"персонажа "+number+" нет онлайн ");
			return;
		}
		target.ParamBase[(703)]=mode;
		player.Say((11),"вы изменили игровой режим игрока "+GetPlayerName(player.Id)+" с номером "+number+" на "+mode);
		Log_factions(player,number,0,mode,null,null);
		
		player.ShowScreen((2),5,"answer_GM_PANNEL_SELF_ID_MODES");
		player.Say((18),"Выберете назначаемый режим");
		player.Say((19+(0)),"0 старт");
		player.Say((19+(1)),"1 приключенец");
		player.Say((19+(2)),"2 выживание");
		player.Say((19+(3)),"3 аркада");
		player.Say((19+(4)),"4 тест");
	}
}

void answer_GM_PANNEL_SELF_ID_FACTIONS(Critter&player,uint answerI,string&answerS)
{
	
	player.ShowScreen((5),0,"gm@ask_GM_PANNEL_SELF_ID_FACTIONS");
	if(answerI==0)
	{
		player.ParamBase[(91)]=0;
		player.Say((39),"Ид - убрать фракции");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=1;
		player.Say((39),"Ид - в администрацию");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=2;
		player.Say((39),"Ид - в полицию");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=3;
		player.Say((39),"Ид - в мафию");
	}
	if(answerI==4)
	{
		player.ParamBase[(91)]=4;
		player.Say((39),"Ид - в мутанты");
	}
	if(answerI==5)
	{
		player.ParamBase[(91)]=5;
		player.Say((39),"Ид - в форт");
	}
	if(answerI==6)
	{
		player.ParamBase[(91)]=6;
		player.Say((39),"Ид - в рейдеры");
	}
	if(answerI==7)
	{
		player.ParamBase[(91)]=10;
		player.Say((39),"Ид - чужак");
	}
	if(answerI==8)
	{
		player.ParamBase[(91)]=11;
		player.Say((39),"Ид - врем.гость");
	}
	if(answerI==9)
	{
		player.ParamBase[(91)]=12;
		player.Say((39),"Ид - гость");
	}
	if(answerI==10)
	{
		player.ParamBase[(91)]=13;
		player.Say((39),"Ид - гражданин");
	}
	if(answerI==11)
	{
		player.ParamBase[(91)]=14;
		player.Say((39),"Ид - богатый");
	}
	if(answerI==12)
	{
		player.ParamBase[(91)]=21;
		player.Say((39),"Ид - изгой");
	}
}

void ask_GM_PANNEL_SELF_ID_FACTIONS(Critter&player,uint answerI,string&answerS)
{
	int mode=player.ParamBase[(91)];
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		Critter@target=GetCritter(number);
		GameVar@citizenship=GetLocalVar((7300),number);
		GameVar@faction=GetLocalVar((9971),number);
		string name=GetPlayerName(number);
		if(mode<10)
		{
			faction.opAssign(mode);
			player.Say((11),"вы изменили фракцию игрока "+name+" с номером "+number+" на "+mode);
			Log_factions(player,number,2,mode,null,null);
		}
		else
		{
			citizenship.opAssign(mode-10);
			player.Say((11),"вы изменили пропуск игрока "+name+" с номером "+number+" на "+mode);
			Log_factions(player,number,1,mode,null,null);
		}
		
		player.ShowScreen((2),13,"answer_GM_PANNEL_SELF_ID_FACTIONS");
		player.Say((18),"Выберете назначаемый режим");
		player.Say((19+(0)),"0 - без фракции");
		player.Say((19+(1)),"1 - администрация");
		player.Say((19+(2)),"2 - полиция");
		player.Say((19+(3)),"3 - мафия");
		player.Say((19+(4)),"4 - мутанты");
		player.Say((19+(5)),"5 - форт");
		player.Say((19+(6)),"6 - рейдеры");
		player.Say((19+(7)),"0 - чужак");
		player.Say((19+(8)),"1 - временный гость");
		player.Say((19+(9)),"2 - гость");
		player.Say((19+(10)),"3 - гражданин");
		player.Say((19+(11)),"4 - богатый гражданин");
		player.Say((19+(12)),"10 - изгой");
	}
}

void answer_GM_PANNEL_SELF_LOG(Critter&cr,uint answerI,string&answerS)
{
	if(!(@cr!=null))
	return;
	if(answerI==0)
	{
		file f;
		if(f.open("logs\\help_pleads.txt","r")>=0)
		{
			string word="";
			uint pos=0;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				pos=f.getPos();
				if(pos==0)
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",0,0,0,word,null);
				}
				else
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",1,0,0,word,null);
				}
			}
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==1)
	{
		file f;
		if(f.open("logs\\warnings.txt","r")>=0)
		{
			string word="";
			uint pos=0;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				pos=f.getPos();
				if(pos==0)
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",0,1,0,word,null);
				}
				else
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",1,1,0,word,null);
				}
			}
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==2)
	{
		file f;
		if(f.open("logs\\killings.txt","r")>=0)
		{
			string word="";
			uint pos=0;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				pos=f.getPos();
				if(pos==0)
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",0,2,0,word,null);
				}
				else
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",1,2,0,word,null);
				}
			}
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==3)
	{
		file f;
		if(f.open("logs\\factions.txt","r")>=0)
		{
			string word="";
			uint pos=0;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				pos=f.getPos();
				if(pos==0)
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",0,3,0,word,null);
				}
				else
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",1,3,0,word,null);
				}
			}
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==4)
	{
		file f;
		if(f.open("save\\bans\\qbans.txt","r")>=0)
		{
			string word="";
			uint pos=0;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				pos=f.getPos();
				if(pos==0)
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",0,4,0,word,null);
				}
				else
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",1,4,0,word,null);
				}
			}
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==5)
	{
		file f;
		if(f.open("save\\bans\\crims.txt","r")>=0)
		{
			string word="";
			uint pos=0;
			f.setPos(0);
			while(!f.isEndOfFile())
			{
				pos=f.getPos();
				if(pos==0)
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",0,8,0,word,null);
				}
				else
				{
					f.readLine(word);
					cr.RunClientScript("client_main@loger",1,8,0,word,null);
				}
			}
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==9&&cr.GetAccess()>(2))
	{
		cr.ShowScreen((2),13,"answer_GM_PANNEL_SELF_LOG_CLEAN");
		cr.Say((18),"Выберете назначаемый режим");
		cr.Say((19+(0)),"0 - очистка help");
		cr.Say((19+(1)),"1 - очистка warn");
		cr.Say((19+(2)),"2 - очистка kill");
		cr.Say((19+(3)),"3 - очистка factions");
	}
	if(answerI==10)
	{
		GM_PANNEL_SELF(cr,0,0,0,null,null);
	}
}

void answer_GM_PANNEL_SELF_LOG_CLEAN(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		file f;
		if(f.open("logs\\help_pleads.txt","w")>=0)
		{
			
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==1)
	{
		file f;
		if(f.open("logs\\warnings.txt","w")>=0)
		{
			
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==2)
	{
		file f;
		if(f.open("logs\\killings.txt","w")>=0)
		{
			
			f.close();
		}
		else
		Log("can't open!");
	}
	if(answerI==3)
	{
		file f;
		if(f.open("logs\\factions.txt","w")>=0)
		{
			
			f.close();
		}
		else
		Log("can't open!");
	}
}

void answer_GM_PANNEL_SELF_MYMODES(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		GM_PANNEL_CRITTER_PLAYER(player,player.Id,0,0,null,null);
	}
	if(answerI==1)
	{
		if(player.ModeBase[(527)]==0)
		player.ModeBase[(527)]=1;
		else
		player.ModeBase[(527)]=0;
	}
	if(answerI==2)
	{
		if(player.ParamBase[(702)]==0)
		player.ParamBase[(702)]=200;
		else
		player.ParamBase[(702)]=0;
		
	}
	if(answerI==3)
	{
		if(player.ModeBase[(514)]==0)
		player.ModeBase[(514)]=1;
		else
		player.ModeBase[(514)]=0;
		
	}
	if(answerI==4)
	{
		sinf(player,0,119,0);
	}
	if(answerI==5)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
}

void answer_GM_PANNEL_SELF_TOWNMODES(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		GameVar@war_mode=GetGlobalVar((7340));
		player.ShowScreen((2),5,"answer_GM_PANNEL_SELF_TOWNMODES_WAR");
		player.Say((18),"воен положение, текущее - "+war_mode.GetValue());
		player.Say((19+(0)),"0 мир");
		player.Say((19+(1)),"1 -чужаки");
		player.Say((19+(2)),"2 #чужаки");
		player.Say((19+(3)),"3 defcon 4");
		player.Say((19+(4)),"4 defcon 5");
	}
	if(answerI==1)
	{
		GameVar@guards_mode=GetGlobalVar((7341));
		player.ShowScreen((2),2,"answer_GM_PANNEL_SELF_TOWNMODES_GUARD");
		player.Say((18),"активность гвардии, текущий - "+guards_mode.GetValue());
		player.Say((19+(0)),"0 мир");
	}
	if(answerI==2)
	{
		GameVar@races_mode=GetGlobalVar((7342));
		player.ShowScreen((2),2,"answer_GM_PANNEL_SELF_TOWNMODES_RACES");
		player.Say((18),"расизм, текущий - "+races_mode.GetValue());
		player.Say((19+(0)),"0 мир");
	}
	if(answerI==3)
	{
		GameVar@border_mode=GetGlobalVar((7343));
		player.ShowScreen((2),6,"answer_GM_PANNEL_SELF_TOWNMODES_GATES");
		player.Say((18),"шлюз, текущий - "+border_mode.GetValue());
		player.Say((19+(0)),"0 обычный");
		player.Say((19+(1)),"1 спец проп");
		player.Say((19+(2)),"2 нет гостей");
		player.Say((19+(3)),"3 карантин1");
		player.Say((19+(4)),"4 карантин2");
		player.Say((19+(5)),"5 открыть город");
	}
	if(answerI==4)
	{
		GameVar@Reg=GetGlobalVar((7344));
		if(Reg.GetValue()==0)
		Reg.opAssign(1);
		else
		Reg.opAssign(0);
	}
	if(answerI==5)
	{
		GM_PANNEL_SELF(player,0,0,0,null,null);
	}
}

void answer_GM_PANNEL_SELF_TOWNMODES_WAR(Critter&player,uint answerI,string&answerS)
{
	GameVar@war_mode=GetGlobalVar((7340));
	war_mode.opAssign(answerI);
	
	player.ShowScreen((2),5,"answer_GM_PANNEL_SELF_TOWNMODES_WAR");
	player.Say((18),"воен положение, текущее - "+war_mode.GetValue());
	player.Say((19+(0)),"0 мир");
	player.Say((19+(1)),"1 -чужаки");
	player.Say((19+(2)),"2 #чужаки");
	player.Say((19+(3)),"3 defcon 4");
	player.Say((19+(4)),"4 defcon 5");
}

void answer_GM_PANNEL_SELF_TOWNMODES_GUARD(Critter&player,uint answerI,string&answerS)
{
	GameVar@guards_mode=GetGlobalVar((7341));
	guards_mode.opAssign(answerI);
}

void answer_GM_PANNEL_SELF_TOWNMODES_RACES(Critter&player,uint answerI,string&answerS)
{
	GameVar@races_mode=GetGlobalVar((7342));
	races_mode.opAssign(answerI);
}

void answer_GM_PANNEL_SELF_TOWNMODES_GATES(Critter&player,uint answerI,string&answerS)
{
	GameVar@border_mode=GetGlobalVar((7343));
	border_mode.opAssign(answerI);
	
	player.ShowScreen((2),6,"answer_GM_PANNEL_SELF_TOWNMODES_GATES");
	player.Say((18),"шлюз, текущий - "+border_mode.GetValue());
	player.Say((19+(0)),"0 обычный");
	player.Say((19+(1)),"1 спец проп");
	player.Say((19+(2)),"2 нет гостей");
	player.Say((19+(3)),"3 карантин1");
	player.Say((19+(4)),"4 карантин2");
	player.Say((19+(5)),"5 открыть город");
}

void GM_PANNEL_CRITTER_PLAYER(Critter&player,int crId,int param1,int param2,string@param3,int[]@param4)
{
	if(player.GetAccess()>=(2))
	{
		Critter@cr=GetCritter(crId);
		if(cr is null)
		return;
		player.StatBase[(90)]=cr.Id;
		player.ShowScreen((2),7,"answer_GM_PANNEL_CRITTER_PLAYER");
		player.Say((18),"Действия с игроком"+crId);
		if(cr.ParamBase[(703)]==(0))
		player.Say((19+(0)),"Mode START");
		else if(cr.ParamBase[(703)]==(1))
		player.Say((19+(0)),"Mode Adventure");
		else if(cr.ParamBase[(703)]==(2))
		player.Say((19+(0)),"Mode SURVIVAL");
		else if(cr.ParamBase[(703)]==(3))
		player.Say((19+(0)),"Mode ARCADE");
		else if(cr.ParamBase[(703)]==(4))
		player.Say((19+(0)),"Mode TEST");
		else
		player.Say((19+(0)),"ошибка режима");
		player.Say((19+(1)),"Параметры");
		player.Say((19+(2)),"Модерация");
		player.Say((19+(3)),"Инвентарь");
		player.Say((19+(4)),"Поощрения");
		player.Say((19+(5)),"Эффект");
		player.Say((19+(6)),""+cr.ParamBase[(702)]+" - всевидимость");
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		player.ShowScreen((2),6,"answer_GM_PANNEL_CRITTER_PLAYER_GAMEMODES");
		player.Say((18),"Текущий режим ="+cr.ParamBase[(703)]+" , выберите новый режим игры");
		player.Say((19+(0)),"0 Mode START");
		player.Say((19+(1)),"1 Mode Adventure");
		player.Say((19+(2)),"2 Mode SURVIVAL");
		player.Say((19+(3)),"3 Mode ARCADE");
		player.Say((19+(4)),"4 Mode TEST");
		player.Say((19+(5)),"назад");
	}
	if(answerI==1)
	{
		GameVar@citizenship=GetLocalVar((7300),cr.Id);
		GameVar@faction=GetLocalVar((9971),cr.Id);
		player.ShowScreen((2),10,"answer_GM_PANNEL_CRITTER_PLAYER_STATS");
		player.Say((18),"Параметры игрока");
		player.Say((19+(0)),"SPECIAL");
		player.Say((19+(1)),"SKILLS 0-9");
		player.Say((19+(2)),"SKILLS 10-20");
		player.Say((19+(3)),"Травмы");
		player.Say((19+(4)),"Режимы");
		player.Say((19+(5)),"Скин/бодитайп");
		player.Say((19+(6)),"Фр="+faction.GetValue()+",Пр="+citizenship.GetValue());
		player.Say((19+(7)),"Доп парам");
		player.Say((19+(8)),"Лексема");
		player.Say((19+(9)),"назад");
	}
	if(answerI==2)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_CRITTER_PLAYER_BANS");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"Предупреждение");
		player.Say((19+(1)),"Kick");
		player.Say((19+(2)),"Kill");
		player.Say((19+(3)),"Ban");
		player.Say((19+(4)),"Kick Ban");
		player.Say((19+(5)),"Ban IP");
		player.Say((19+(6)),"unBan");
		player.Say((19+(7)),"Hard_Ban");
		player.Say((19+(8)),"назад");
	}
	if(answerI==3)
	{
		player.ShowContainer(cr,null,(8));
	}
	if(answerI==4)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_CRITTER_PLAYER_GIFT");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"+Опыт");
		player.Say((19+(1)),"+Карма");
		player.Say((19+(2)),"-Карма");
		player.Say((19+(3)),"+Хп");
		player.Say((19+(4)),"-Хп");
		player.Say((19+(5)),"+перк");
		player.Say((19+(6)),"-перк");
		player.Say((19+(7)),"Full heal");
		player.Say((19+(8)),"назад");
	}
	if(answerI==5)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_CRITTER_PLAYER_EFFECTS");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"Черный экран 30c");
		player.Say((19+(1)),"Белый экран 30с");
		player.Say((19+(2)),"Красный экран 30с");
		player.Say((19+(3)),"Черный экран Н 25c");
		player.Say((19+(4)),"Белый экран Н 25с");
		player.Say((19+(5)),"Красный экран Н 25с");
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_EFFECTS(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	
	if(answerI==0)
	{
		FlushScreen(cr,((uint((0xFF<<24)|(((0)&0xFF)<<16)|(((0)&0xFF)<<8)|((0)&0xFF)))),0,30000);
	}
	if(answerI==1)
	{
		FlushScreen(cr,((uint((0xFF<<24)|(((0xFF)&0xFF)<<16)|(((0xFF)&0xFF)<<8)|((0xFF)&0xFF)))),0,30000);
	}
	if(answerI==2)
	{
		FlushScreen(cr,((uint((0xFF<<24)|(((0xC8)&0xFF)<<16)|(((0)&0xFF)<<8)|((0)&0xFF)))),0,30000);
	}
	if(answerI==3)
	{
		FlushScreen(cr,((uint((0xFF<<24)|(((0)&0xFF)<<16)|(((0)&0xFF)<<8)|((0)&0xFF)))),((uint((0xFF<<24)|(((0)&0xFF)<<16)|(((0)&0xFF)<<8)|((0)&0xFF)))),25000);
	}
	if(answerI==4)
	{
		FlushScreen(cr,((uint((0xFF<<24)|(((0xFF)&0xFF)<<16)|(((0xFF)&0xFF)<<8)|((0xFF)&0xFF)))),((uint((0xFF<<24)|(((0xFF)&0xFF)<<16)|(((0xFF)&0xFF)<<8)|((0xFF)&0xFF)))),25000);
	}
	if(answerI==5)
	{
		FlushScreen(cr,((uint((0xFF<<24)|(((0xC8)&0xFF)<<16)|(((0)&0xFF)<<8)|((0)&0xFF)))),((uint((0xFF<<24)|(((0xC8)&0xFF)<<16)|(((0)&0xFF)<<8)|((0)&0xFF)))),25000);
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_GIFT(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	
	if(answerI==0)
	{
		player.ParamBase[(91)]=(76);
		player.ParamBase[(92)]=0;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_GIFT_ADD");
		player.Say((39),"Опыт");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=(80);
		player.ParamBase[(92)]=0;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_GIFT_ADD");
		player.Say((39),"Карма");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=(80);
		player.ParamBase[(92)]=1;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_GIFT_ADD");
		player.Say((39),"Карма");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=(72);
		player.ParamBase[(92)]=0;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_GIFT_ADD");
		player.Say((39),"Хп");
	}
	if(answerI==4)
	{
		player.ParamBase[(91)]=(72);
		player.ParamBase[(92)]=1;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_GIFT_ADD");
		player.Say((39),"Хп");
	}
	if(answerI==5)
	{
		player.ParamBase[(91)]=(__PerkBegin);
		player.ParamBase[(92)]=0;
		player.ShowScreen((2),12,"answer_GM_PANNEL_CRITTER_PLAYER_GIFT_PERK");
		player.Say((18),"Выбор перка");
		player.Say((19+(0)),"назад");
		for(uint i=1;i<11;i++)
		{
			player.SayMsg((19+(i)),(3),(10000+player.ParamBase[(91)]+i)*10+1);
		}
		player.Say((19+(11)),"далее");
	}
	if(answerI==6)
	{
		player.ParamBase[(91)]=(__PerkBegin);
		player.ParamBase[(92)]=1;
		player.ShowScreen((2),12,"answer_GM_PANNEL_CRITTER_PLAYER_GIFT_PERK");
		player.Say((18),"Выбор перка");
		player.Say((19+(0)),"назад");
		for(uint i=1;i<11;i++)
		{
			player.SayMsg((19+(i)),(3),(10000+player.ParamBase[(91)]+i)*10+1);
		}
		player.Say((19+(11)),"далее");
	}
	if(answerI==7)
	{
		cr.StatBase[(72)]=cr.Stat[(7)];
		cr.ParamBase[(730)]=0;
		cr.ParamBase[(732)]=0;
		cr.ParamBase[(734)]=0;
		cr.ParamBase[(735)]=0;
		cr.ParamBase[(737)]=0;
		cr.ParamBase[(736)]=0;
		cr.ParamBase[(733)]=0;
		cr.ParamBase[(731)]=0;
		cr.ParamBase[(737)]=0;
		cr.ParamBase[(739)]=0;
		cr.ParamBase[(149)]=0;
		cr.DamageBase[(502)]=0;
		cr.DamageBase[(503)]=0;
		cr.DamageBase[(504)]=0;
		cr.DamageBase[(505)]=0;
		cr.DamageBase[(506)]=0;
		cr.StatBase[(195)]=0;
		cr.EraseTimeEvents((58));
		unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" отхилил персонажа "+cr.Name+" "+cr.Id,null);
	}
	if(answerI==8)
	{
		GM_PANNEL_CRITTER_PLAYER(player,cr.Id,0,0,null,null);
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_GIFT_PERK(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	
	if(answerI==0&&player.ParamBase[(91)]>(__PerkBegin)+10)
	{
		player.ParamBase[(91)]-=11;
		player.ShowScreen((2),12,"answer_GM_PANNEL_CRITTER_PLAYER_GIFT_PERK");
		player.Say((18),"Выбор перка");
		player.Say((19+(0)),"назад");
		for(uint i=1;i<11;i++)
		{
			player.SayMsg((19+(i)),(3),(10000+player.ParamBase[(91)]+i)*10+1);
		}
		player.Say((19+(11)),"далее");
	}
	if(answerI==11&&player.ParamBase[(91)]<(__PerkEnd)-10)
	{
		player.ParamBase[(91)]+=11;
		player.ShowScreen((2),12,"answer_GM_PANNEL_CRITTER_PLAYER_GIFT_PERK");
		player.Say((18),"Выбор перка");
		player.Say((19+(0)),"назад");
		for(uint i=1;i<11;i++)
		{
			player.SayMsg((19+(i)),(3),(10000+player.ParamBase[(91)]+i)*10+1);
		}
		player.Say((19+(11)),"далее");
	} 
	
	else if(player.Stat[(92)]==0)
	{
		cr.ParamBase[player.ParamBase[(91)]+answerI]++;
		int perkId=player.ParamBase[(91)]+answerI;
		player.Say((11),"вы увеличили перк "+perkId+" на 1 у игрока "+cr.Id);
		unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" увеличил перк "+perkId+" на +1 "+" у игрока "+cr.Name+" "+cr.Id,null);
	}
	else
	{
		cr.ParamBase[player.ParamBase[(91)]+answerI]--;
		int perkId=player.ParamBase[(91)]+answerI;
		player.Say((11),"вы отняли перк "+perkId+" на 1 у игрока "+cr.Id);
		unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" отнял перк "+perkId+" на -1 "+" у игрока "+cr.Name+" "+cr.Id,null);
	}
}

void ask_GM_PANNEL_CRITTER_PLAYER_GIFT_ADD(Critter&player,uint answerI,string&answerS)
{
	Critter@target=GetCritter(player.Stat[(90)]);
	int parameter=player.Stat[(91)];
	if(!(@target!=null))
	return;
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		if(player.Stat[(92)]==0)
		{
			unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" прибавил к параметру "+parameter+" cо знач. "+target.ParamBase[parameter]+" у игрока "+target.Name+" "+target.Id+" -V- (НАЧАЛО)",null);
			target.ParamBase[parameter]+=number;
			player.Say((11),"вы увеличили параметр "+parameter+" на "+number+" у игрока "+target.Id);
			unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" прибавил к параметру "+parameter+"  +"+number+" -^- (КОНЕЦ)",null);
		}
		else
		{
			unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" уменьшил у параметра "+parameter+" cо знач. "+target.ParamBase[parameter]+" у игрока "+target.Name+" "+target.Id+" -V- (НАЧАЛО)",null);
			target.ParamBase[parameter]-=number;
			player.Say((11),"вы уменьшили параметр "+parameter+" на "+number+" у игрока "+target.Id);
			unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" уменьшил у параметра "+parameter+"  -"+number+" -^- (КОНЕЦ)",null);
		}
		ChangeCritterSpeed(target);
	}
	GM_PANNEL_CRITTER_PLAYER(player,target.Id,0,0,null,null);
} 

void answer_GM_PANNEL_CRITTER_PLAYER_GAMEMODES(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	cr.ParamBase[(703)]=answerI;
	Log_factions(player,cr.Id,0,answerI,null,null);
}

void answer_GM_PANNEL_CRITTER_PLAYER_BANS(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		Warn(player,cr.Id,0,0);
	}
	if(answerI==1)
	{
		KickId(player,cr.Id,0,0);
	}
	if(answerI==2)
	{
		player.ShowScreen((2),10,"answer_GM_PANNEL_CRITTER_PLAYER_BANS_KILL");
		player.Say((18),"Убить предельно жестоким способом");
		player.Say((19+(0)),"Просто смерть");
		player.Say((19+(1)),"Вырыв бока");
		player.Say((19+(2)),"Разрыв Очередью");
		player.Say((19+(3)),"очередью");
		player.Say((19+(4)),"в прах");
		player.Say((19+(5)),"в куски");
		player.Say((19+(6)),"огонь");
		player.Say((19+(7)),"в соплю");
		player.Say((19+(8)),"пополам");
		player.Say((19+(9)),"назад");
	}
	if(answerI==3)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_BANS_BAN");
		player.Say((39),"Бан "+GetPlayerName(cr.Id)+" на часов:");
	}
	if(answerI==4)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_BANS_KICKBAN");
		player.Say((39),"Бан "+GetPlayerName(cr.Id)+" на часов:");
	}
	if(answerI==5)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_BANS_KICKBANIP");
		player.Say((39),"Бан по IP"+GetPlayerName(cr.Id)+" на часов:");
	}
	if(answerI==6)
	{
		UnbanId(player,cr.Id,0,0);
		player.Say((11),"персонаж "+GetPlayerName(cr.Id)+"("+cr.Id+")"+" разблокирован");
		
		player.ShowScreen((2),8,"answer_GM_PANNEL_CRITTER_PLAYER_BANS");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"Предупреждение");
		player.Say((19+(1)),"Kick");
		player.Say((19+(2)),"Kill");
		player.Say((19+(3)),"Ban");
		player.Say((19+(4)),"Kick Ban");
		player.Say((19+(5)),"Ban IP");
		player.Say((19+(6)),"unBan");
		player.Say((19+(7)),"назад");
	}
	if(answerI==7)
	{
		GM_HardBanId(player,cr.Id);
		player.Say((11),"персонаж "+GetPlayerName(cr.Id)+"("+cr.Id+")"+" заблокирован по системе");
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_BANS_BAN");
		player.Say((39),"Бан "+GetPlayerName(cr.Id)+" на часов:");
	}
	if(answerI==8)
	{
		GM_PANNEL_CRITTER_PLAYER(player,cr.Id,0,0,null,null);
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_BANS_KILL(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)return;
	
	if(answerI==9)
	{
		GM_PANNEL_CRITTER_PLAYER(player,cr.Id,0,0,null,null);
		return;
	}
	
	killbytype(player,answerI,0,0,null,null);
}

void ask_GM_PANNEL_CRITTER_PLAYER_BANS_UNBAN(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		Critter@cr=GetCritter(player.Stat[(90)]);
		if(cr is null)
		return;
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		KickBanIdIp(player,cr.Id,number,0);
		player.Say((11),"персонаж "+GetPlayerName(cr.Id)+"("+cr.Id+")"+" заблокирован по IP на "+number+" часов");
		
		player.ShowScreen((2),8,"answer_GM_PANNEL_CRITTER_PLAYER_BANS");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"Предупреждение");
		player.Say((19+(1)),"Kick");
		player.Say((19+(2)),"Kill");
		player.Say((19+(3)),"Ban");
		player.Say((19+(4)),"Kick Ban");
		player.Say((19+(5)),"Ban IP");
		player.Say((19+(6)),"unBan");
		player.Say((19+(7)),"назад");
	}
}

void ask_GM_PANNEL_CRITTER_PLAYER_BANS_KICKBANIP(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		Critter@cr=GetCritter(player.Stat[(90)]);
		if(cr is null)
		return;
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		KickBanIdIp(player,cr.Id,number,0);
		player.Say((11),"персонаж "+GetPlayerName(cr.Id)+"("+cr.Id+")"+" заблокирован по IP на "+number+" часов");
		
		player.ShowScreen((2),8,"answer_GM_PANNEL_CRITTER_PLAYER_BANS");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"Предупреждение");
		player.Say((19+(1)),"Kick");
		player.Say((19+(2)),"Kill");
		player.Say((19+(3)),"Ban");
		player.Say((19+(4)),"Kick Ban");
		player.Say((19+(5)),"Ban IP");
		player.Say((19+(6)),"unBan");
		player.Say((19+(7)),"назад");
	}
}

void ask_GM_PANNEL_CRITTER_PLAYER_BANS_KICKBAN(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		Critter@cr=GetCritter(player.Stat[(90)]);
		if(cr is null)
		return;
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		BanId(player,cr.Id,number,1);
		player.Say((11),"персонаж "+GetPlayerName(cr.Id)+"("+cr.Id+")"+" заблокирован на "+number+" часов");
		
		player.ShowScreen((2),8,"answer_GM_PANNEL_CRITTER_PLAYER_BANS");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"Предупреждение");
		player.Say((19+(1)),"Kick");
		player.Say((19+(2)),"Kill");
		player.Say((19+(3)),"Ban");
		player.Say((19+(4)),"Kick Ban");
		player.Say((19+(5)),"Ban IP");
		player.Say((19+(6)),"unBan");
		player.Say((19+(7)),"назад");
	}
}

void ask_GM_PANNEL_CRITTER_PLAYER_BANS_BAN(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		Critter@cr=GetCritter(player.Stat[(90)]);
		if(cr is null)
		return;
		int number=0;
		StrToInt(answerS,number);
		if(number<=0)
		{
			player.Say((11),"неверное значение");
			return;
		}
		BanId(player,cr.Id,number,0);
		player.Say((11),"персонаж "+GetPlayerName(cr.Id)+"("+cr.Id+")"+"заблокирован на "+number+" часов");
		
		player.ShowScreen((2),8,"answer_GM_PANNEL_CRITTER_PLAYER_BANS");
		player.Say((18),"Модерация");
		player.Say((19+(0)),"Предупреждение");
		player.Say((19+(1)),"Kick");
		player.Say((19+(2)),"Kill");
		player.Say((19+(3)),"Ban");
		player.Say((19+(4)),"Kick Ban");
		player.Say((19+(5)),"Ban IP");
		player.Say((19+(6)),"unBan");
		player.Say((19+(7)),"назад");
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		player.ShowScreen((2),7,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((18),"SPECIAL игрока");
		player.Say((19+(0)),""+cr.ParamBase[(0)]+" - сила");
		player.Say((19+(1)),""+cr.ParamBase[(1)]+" - восприятие");
		player.Say((19+(2)),""+cr.ParamBase[(2)]+" - выносливость");
		player.Say((19+(3)),""+cr.ParamBase[(3)]+" - харизма");
		player.Say((19+(4)),""+cr.ParamBase[(4)]+" - интеллект");
		player.Say((19+(5)),""+cr.ParamBase[(5)]+" - ловкость");
		player.Say((19+(6)),""+cr.ParamBase[(6)]+" - удача");
	}
	if(answerI==1)
	{
		player.ShowScreen((2),11,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKILL1");
		player.Say((18),"Навыки игрока");
		player.Say((19+(0)),""+cr.ParamBase[(200)]+" - легкое");
		player.Say((19+(1)),""+cr.ParamBase[(201)]+" - тяжелое");
		player.Say((19+(2)),""+cr.ParamBase[(202)]+" - энерго");
		player.Say((19+(3)),""+cr.ParamBase[(203)]+" - рукопашная");
		player.Say((19+(4)),""+cr.ParamBase[(204)]+" - холодное");
		player.Say((19+(5)),""+cr.ParamBase[(205)]+" - метание");
		player.Say((19+(6)),""+cr.ParamBase[(206)]+" - санитар");
		player.Say((19+(7)),""+cr.ParamBase[(207)]+" - доктор");
		player.Say((19+(8)),""+cr.ParamBase[(208)]+" - скрытность");
		player.Say((19+(9)),""+cr.ParamBase[(209)]+" - взлом");
		player.Say((19+(10)),""+cr.ParamBase[(210)]+" - кража");
	}
	if(answerI==2)
	{
		player.ShowScreen((2),7,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKILL2");
		player.Say((18),"Навыки игрока");
		player.Say((19+(0)),""+cr.ParamBase[(211)]+" - ловушки");
		player.Say((19+(1)),""+cr.ParamBase[(212)]+" - наука");
		player.Say((19+(2)),""+cr.ParamBase[(213)]+" - ремонт");
		player.Say((19+(3)),""+cr.ParamBase[(214)]+" - разговор");
		player.Say((19+(4)),""+cr.ParamBase[(215)]+" - торговля");
		player.Say((19+(5)),""+cr.ParamBase[(216)]+" - игра");
		player.Say((19+(6)),""+cr.ParamBase[(217)]+" - скиталец");
	}
	if(answerI==3)
	{
		player.ShowScreen((2),7,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_DAMAGES");
		player.Say((18),"Травмы игрока");
		player.Say((19+(0)),""+cr.ParamBase[(502)]+" - травма глаза");
		player.Say((19+(1)),""+cr.ParamBase[(503)]+" - правая рука");
		player.Say((19+(2)),""+cr.ParamBase[(504)]+" - левая рука");
		player.Say((19+(3)),""+cr.ParamBase[(505)]+" - правая нога");
		player.Say((19+(4)),""+cr.ParamBase[(506)]+" - левая нога");
		player.Say((19+(5)),""+cr.ParamBase[(501)]+" - радиация");
		player.Say((19+(6)),""+cr.ParamBase[(500)]+" - отравление");
	}
	if(answerI==4)
	{
		player.ShowScreen((2),11,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_MODES");
		player.Say((18),"Режимы игрока");
		player.Say((19+(0)),""+cr.ParamBase[(514)]+" - нопвп");
		player.Say((19+(1)),""+cr.ParamBase[(527)]+" - неуязвимость");
		player.Say((19+(2)),""+cr.ParamBase[(532)]+" - нелутаемость");
		player.Say((19+(3)),""+cr.ParamBase[(511)]+" - неворуемость");
		player.Say((19+(4)),""+cr.ParamBase[(536)]+" - непихаемость");
		player.Say((19+(5)),""+cr.ParamBase[(539)]+" - стоять");
		player.Say((19+(6)),""+cr.ParamBase[(540)]+" - нет бега");
		player.Say((19+(7)),""+cr.ParamBase[(524)]+" - нет травм");
		player.Say((19+(8)),""+cr.ParamBase[(531)]+" - несбиваемость");
		player.Say((19+(9)),""+cr.ParamBase[(700)]+" - пси-способности");
		player.Say((19+(10)),""+cr.ParamBase[(702)]+" - всевидимость");
	}
	if(answerI==5)
	{
		player.ShowScreen((2),7,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS");
		player.Say((18),"Текущий скин - "+cr.ParamBase[(112)]);
		player.Say((19+(0)),""+cr.ParamBase[(67)]+" - бодитайп");
		player.Say((19+(1)),""+cr.ParamBase[(112)]+" - скин вручную");
		player.Say((19+(2)),"стандартный");
		player.Say((19+(3)),"дикари");
		player.Say((19+(4)),"гражданские");
		player.Say((19+(5)),"бандитские");
		player.Say((19+(6)),"разное");
	}
	if(answerI==6)
	{
		GameVar@citizenship=GetLocalVar((7300),cr.Id);
		GameVar@faction=GetLocalVar((9971),cr.Id);
		player.ShowScreen((2),12,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_FACTIONS");
		player.Say((18),"Текущая фракция - "+faction.GetValue()+". Текущий пропуск - "+citizenship.GetValue());
		player.Say((19+(0)),"0 - без фракции");
		player.Say((19+(1)),"1 - администрация");
		player.Say((19+(2)),"2 - полиция");
		player.Say((19+(3)),"3 - мафия");
		player.Say((19+(4)),"4 - мутанты");
		player.Say((19+(5)),"5 - форт");
		player.Say((19+(6)),"6 - рейдеры");
		player.Say((19+(7)),"0 - чужак");
		player.Say((19+(8)),"1 - временный гость");
		player.Say((19+(9)),"2 - гость");
		player.Say((19+(10)),"3 - гражданин");
		player.Say((19+(11)),"4 - богатый гражданин");
	}
	if(answerI==7)
	{
		player.ShowScreen((2),4,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_PARAM");
		player.Say((18),"Дополнительные параметры");
		player.Say((19+(0)),""+cr.ParamBase[(72)]+"Текущее хп");
		player.Say((19+(1)),""+cr.ParamBase[(7)]+"макс хп");
		player.Say((19+(2)),""+cr.ParamBase[(70)]+"возраст");
		player.Say((19+(3)),""+cr.ParamBase[(71)]+"пол");
	}
	if(answerI==8)
	{
		ShowInputBoxScreen(player,"gm@unsafe_Description#Описание, приметы",0,(0x00000001));
	}
	if(answerI==9)
	{
		GM_PANNEL_CRITTER_PLAYER(player,cr.Id,0,0,null,null);
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_PARAM(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	
	player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
	
	if(answerI==0)
	{
		player.ToLife();
		player.ParamBase[(91)]=(72);
		player.Say((39),"Хп");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=(7);
		player.Say((39),"Макс Хп");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=(70);
		player.Say((39),"Возраст");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=(71);
		player.Say((39),"Пол");
	}
}

void unsafe_Description(Critter&player,int skill,int p1,int p2,string@message,int[]@p4)
{
	if(message.length()!=0)
	{
		Critter@cr=GetCritter(player.ParamBase[(90)]);
		if(cr is null)
		return;
		cr.SetLexems(message);
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_DAMAGES(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		if(cr.ParamBase[(502)]==0)
		cr.ParamBase[(502)]=1;
		else
		cr.ParamBase[(502)]=0;
	}
	else if(answerI==1)
	{
		if(cr.ParamBase[(503)]==0)
		cr.ParamBase[(503)]=1;
		else
		cr.ParamBase[(503)]=0;
	}
	else if(answerI==2)
	{
		if(cr.ParamBase[(504)]==0)
		cr.ParamBase[(504)]=1;
		else
		cr.ParamBase[(504)]=0;
	}
	else if(answerI==3)
	{
		if(cr.ParamBase[(505)]==0)
		cr.ParamBase[(505)]=1;
		else
		cr.ParamBase[(505)]=0;
	}
	else if(answerI==4)
	{
		if(cr.ParamBase[(506)]==0)
		cr.ParamBase[(506)]=1;
		else
		cr.ParamBase[(506)]=0;
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		player.ShowScreen((2),15,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_BODY");
		player.Say((18),"Текущий бодитайп - "+cr.ParamBase[(67)]);
		player.Say((19+(0)),"1 мужчина");
		player.Say((19+(1)),"2 женщина");
		player.Say((19+(2)),"3 ребенок");
		player.Say((19+(3)),"4 супермутант");
		player.Say((19+(4)),"5 гуль");
		player.Say((19+(5)),"6 брамин");
		player.Say((19+(6)),"7 радскорпион");
		player.Say((19+(7)),"8 крыса");
		player.Say((19+(8)),"9 летун");
		player.Say((19+(9)),"10 кентавр");
		player.Say((19+(10)),"11 робот");
		player.Say((19+(11)),"12 пес");
		player.Say((19+(12)),"13 мантис");
		player.Say((19+(13)),"14 коготь смерти");
		player.Say((19+(14)),"15 растение");
	}
	if(answerI==1)
	{
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS");
		player.Say((39),"Номер скина");
	}
	if(answerI==2)
	{
		cr.ChangeCrType(cr.Stat[(71)]==(0)?((106)):((4)));
		cr.StatBase[(112)]=cr.Stat[(71)]==(0)?((106)):((4));
	}
	if(answerI==3)
	{
		player.ShowScreen((2),6,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_BODY");
		player.Say((18),"Текущий скин - "+cr.ParamBase[(112)]);
		player.Say((19+(0)),"62 Дикарь");
		player.Say((19+(1)),"64 сулик");
		player.Say((19+(2)),"110 патлатый");
		player.Say((19+(3)),"120 лысый");
		player.Say((19+(4)),"61 Дикарка");
		player.Say((19+(5)),"63 Дикарка хв.");
	}
	if(answerI==4)
	{
		player.ShowScreen((2),15,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_CIVIL");
		player.Say((18),"Текущий скин - "+cr.ParamBase[(112)]);
		player.Say((19+(0)),"33 Блондинка");
		player.Say((19+(1)),"36 Девушка");
		player.Say((19+(2)),"37 Шлюха");
		player.Say((19+(3)),"39 Негр в кр.");
		player.Say((19+(4)),"40 свитер");
		player.Say((19+(5)),"41 рубашка");
		player.Say((19+(6)),"42 Коротышка");
		player.Say((19+(7)),"43 Бомж сгорбленный");
		player.Say((19+(8)),"48 Караванщик");
		player.Say((19+(9)),"72 костюм");
		player.Say((19+(10)),"73 Китти");
		player.Say((19+(11)),"77 Вышибала");
		player.Say((19+(12)),"57 Доктор");
		player.Say((19+(13)),"89 Ученый");
		player.Say((19+(14)),"91 Вик");
	}
	if(answerI==5)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_BATTLE");
		player.Say((18),"Текущий скин - "+cr.ParamBase[(112)]);
		player.Say((19+(0)),"9 Негр");
		player.Say((19+(1)),"34 Бандитка панк");
		player.Say((19+(2)),"35 Мет. жен");
		player.Say((19+(3)),"45 Бандит");
		player.Say((19+(4)),"82 Китаец бед");
		player.Say((19+(5)),"92 Китаец кр.");
		player.Say((19+(6)),"93 Китаец син.");
		player.Say((19+(7)),"94 Китайка");
		player.Say((19+(8)),"87 Полицейский");
	}
	if(answerI==6)
	{
		player.ShowScreen((2),3,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_MISC");
		player.Say((18),"Текущий скин - "+cr.ParamBase[(112)]);
		player.Say((19+(0)),"16 собака");
		player.Say((19+(1)),"66 робот боевой");
		player.Say((19+(2)),"65 растение");
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_CIVIL(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		cr.ChangeCrType(33);
		cr.StatBase[(112)]=33;
	}
	if(answerI==1)
	{
		cr.ChangeCrType(36);
		cr.StatBase[(112)]=36;
	}
	if(answerI==2)
	{
		cr.ChangeCrType(37);
		cr.StatBase[(112)]=37;
	}
	if(answerI==3)
	{
		cr.ChangeCrType(39);
		cr.StatBase[(112)]=39;
	}
	if(answerI==4)
	{
		cr.ChangeCrType(40);
		cr.StatBase[(112)]=40;
	}
	if(answerI==5)
	{
		cr.ChangeCrType(41);
		cr.StatBase[(112)]=41;
	}
	if(answerI==6)
	{
		cr.ChangeCrType(42);
		cr.StatBase[(112)]=42;
	}
	if(answerI==7)
	{
		cr.ChangeCrType(43);
		cr.StatBase[(112)]=43;
	}
	if(answerI==8)
	{
		cr.ChangeCrType(48);
		cr.StatBase[(112)]=48;
	}
	if(answerI==9)
	{
		cr.ChangeCrType(72);
		cr.StatBase[(112)]=72;
	}
	if(answerI==10)
	{
		cr.ChangeCrType(73);
		cr.StatBase[(112)]=73;
	}
	if(answerI==11)
	{
		cr.ChangeCrType(77);
		cr.StatBase[(112)]=77;
	}
	if(answerI==12)
	{
		cr.ChangeCrType(57);
		cr.StatBase[(112)]=57;
	}
	if(answerI==13)
	{
		cr.ChangeCrType(89);
		cr.StatBase[(112)]=89;
	}
	if(answerI==14)
	{
		cr.ChangeCrType(91);
		cr.StatBase[(112)]=91;
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_BATTLE(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		cr.ChangeCrType(9);
		cr.StatBase[(112)]=9;
	}
	if(answerI==1)
	{
		cr.ChangeCrType(34);
		cr.StatBase[(112)]=34;
	}
	if(answerI==2)
	{
		cr.ChangeCrType(35);
		cr.StatBase[(112)]=35;
	}
	if(answerI==3)
	{
		cr.ChangeCrType(45);
		cr.StatBase[(112)]=45;
	}
	if(answerI==4)
	{
		cr.ChangeCrType(82);
		cr.StatBase[(112)]=82;
	}
	if(answerI==5)
	{
		cr.ChangeCrType(92);
		cr.StatBase[(112)]=92;
	}
	if(answerI==6)
	{
		cr.ChangeCrType(93);
		cr.StatBase[(112)]=93;
	}
	if(answerI==7)
	{
		cr.ChangeCrType(94);
		cr.StatBase[(112)]=94;
	}
	if(answerI==8)
	{
		cr.ChangeCrType(87);
		cr.StatBase[(112)]=87;
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_MISC(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		cr.ChangeCrType(16);
		cr.StatBase[(112)]=16;
	}
	if(answerI==1)
	{
		cr.ChangeCrType(66);
		cr.StatBase[(112)]=66;
	}
	if(answerI==2)
	{
		cr.ChangeCrType(66);
		cr.StatBase[(112)]=66;
	}
}

void ask_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS(Critter&player,uint answerI,string&answerS)
{
	if(answerS.length()>0)
	{
		int number=0;
		StrToInt(answerS,number);
		Critter@cr=GetCritter(player.ParamBase[(90)]);
		if(!(@cr!=null))
		{
			player.Say((11),"персонажа "+GetPlayerName(player.ParamBase[(90)])+"  "+player.ParamBase[(90)]+" нет онлайн ");
			return;
		}
		cr.ChangeCrType(number);
		cr.StatBase[(112)]=number;
		player.Say((11),"Скин персонажа "+GetPlayerName(player.ParamBase[(90)])+"  "+player.ParamBase[(90)]+" был изменен на "+number);
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKINS_BODY(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	cr.ParamBase[(67)]=answerI;
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_MODES(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		if(cr.ModeBase[(514)]==0)
		cr.ModeBase[(514)]=1;
		else
		cr.ModeBase[(514)]=0;
		
	}
	if(answerI==1)
	{
		if(cr.ModeBase[(527)]==0)
		cr.ModeBase[(527)]=1;
		else
		cr.ModeBase[(527)]=0;
	}
	if(answerI==2)
	{
		if(cr.ModeBase[(532)]==0)
		cr.ModeBase[(532)]=1;
		else
		cr.ModeBase[(532)]=0;
	}
	if(answerI==3)
	{
		if(cr.ModeBase[(511)]==0)
		cr.ModeBase[(511)]=1;
		else
		cr.ModeBase[(511)]=0;
	}
	if(answerI==4)
	{
		if(cr.ModeBase[(536)]==0)
		cr.ModeBase[(536)]=1;
		else
		cr.ModeBase[(536)]=0;
	}
	if(answerI==5)
	{
		if(cr.ModeBase[(539)]==0)
		cr.ModeBase[(539)]=1;
		else
		cr.ModeBase[(539)]=0;
	}
	if(answerI==6)
	{
		if(cr.ModeBase[(540)]==0)
		cr.ModeBase[(540)]=1;
		else
		cr.ModeBase[(540)]=0;
	}
	if(answerI==7)
	{
		if(cr.ModeBase[(524)]==0)
		cr.ModeBase[(524)]=1;
		else
		cr.ModeBase[(524)]=0;
	}
	if(answerI==8)
	{
		if(cr.ModeBase[(531)]==0)
		cr.ModeBase[(531)]=1;
		else
		cr.ModeBase[(531)]=0;
		
	}
	if(answerI==9)
	{
		player.ShowScreen((2),5,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_MODES_MEDIUM");
		player.Say((18),"Текущий - "+cr.ParamBase[(700)]);
		player.Say((19+(0)),"0 - нет");
		player.Say((19+(1)),"1 - мастер зверей");
		player.Say((19+(2)),"2 - безликий");
		player.Say((19+(3)),"3 - голос");
		player.Say((19+(4)),"4 - притворщик");
	}
	if(answerI==10)
	{
		if(cr.ParamBase[(702)]>=0)
		cr.ParamBase[(702)]=0;
		else
		cr.ParamBase[(702)]=0;
		
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_MODES_MEDIUM(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==4)
	{
		player.ParamBase[(91)]=(700);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Ид");
	}
	else cr.ParamBase[(700)]=answerI;
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_FACTIONS(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	GameVar@citizenship=GetLocalVar((7300),cr.Id);
	GameVar@faction=GetLocalVar((9971),cr.Id);
	if(answerI==0)
	{
		faction.opAssign(0);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,2,0,null,null);
	}
	if(answerI==1)
	{
		faction.opAssign(1);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,2,1,null,null);
	}
	if(answerI==2)
	{
		faction.opAssign(2);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,2,2,null,null);
	}
	if(answerI==3)
	{
		faction.opAssign(3);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,2,3,null,null);
	}
	if(answerI==4)
	{
		faction.opAssign(4);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,2,4,null,null);
	}
	if(answerI==5)
	{
		faction.opAssign(5);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,2,5,null,null);
	}
	if(answerI==6)
	{
		faction.opAssign(6);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,2,6,null,null);
	}
	if(answerI==7)
	{
		citizenship.opAssign(0);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,1,0,null,null);
	}
	if(answerI==8)
	{
		citizenship.opAssign(1);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,1,1,null,null);
	}
	if(answerI==9)
	{
		citizenship.opAssign(2);
		RestartFactions(cr,0,0,0);
		cr.ParamBase[(800)]=player.Id;
		Log_factions(player,cr.Id,1,2,null,null);
	}
	if(answerI==10)
	{
		citizenship.opAssign(3);
		Item@pass=cr.AddItem((910),1);
		pass.Val1=cr.Id;
		cr.ParamBase[(800)]=player.Id;
		player.ShowScreen((5),0,"handcuffs@PassportLex");
		player.Say((39),"Имя в документы");
		player.StatBase[(93)]=pass.Id;
		RestartFactions(cr,0,0,0);
		Log_factions(player,cr.Id,1,3,null,null);
	}
	if(answerI==11)
	{
		citizenship.opAssign(4);
		Item@pass=cr.AddItem((910),1);
		pass.Val1=cr.Id;
		cr.ParamBase[(800)]=player.Id;
		player.ShowScreen((5),0,"handcuffs@PassportLex");
		player.Say((39),"Имя в документы");
		player.StatBase[(93)]=pass.Id;
		RestartFactions(cr,0,0,0);
		Log_factions(player,cr.Id,1,4,null,null);
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKILL2(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		player.ParamBase[(91)]=211;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Ловушки");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=212;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Наука");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=213;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Ремонт");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=214;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Разговор");
	}
	if(answerI==4)
	{
		player.ParamBase[(91)]=215;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Торговля");
	}
	if(answerI==5)
	{
		player.ParamBase[(91)]=216;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Азартные игры");
	}
	if(answerI==6)
	{
		player.ParamBase[(91)]=217;
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"Скиталец");
	}
} 

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKILL1(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	
	player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
	if(answerI==0)
	{
		player.ParamBase[(91)]=200;
		player.Say((39),"Легкоге");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=201;
		player.Say((39),"Тяжелое");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=202;
		player.Say((39),"Энерго");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=203;
		player.Say((39),"Рукопашная");
	}
	if(answerI==4)
	{
		player.ParamBase[(91)]=204;
		player.Say((39),"Холодное");
	}
	if(answerI==5)
	{
		player.ParamBase[(91)]=205;
		player.Say((39),"Метание");
	}
	if(answerI==6)
	{
		player.ParamBase[(91)]=206;
		player.Say((39),"Санитар");
	}
	if(answerI==7)
	{
		player.ParamBase[(91)]=207;
		player.Say((39),"Доктор");
	}
	if(answerI==8)
	{
		player.ParamBase[(91)]=208;
		player.Say((39),"Скрытность");
	}
	if(answerI==9)
	{
		player.ParamBase[(91)]=209;
		player.Say((39),"Взлом");
	}
	if(answerI==10)
	{
		player.ParamBase[(91)]=210;
		player.Say((39),"Воровство");
	}
}

void answer_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	
	player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
	
	if(answerI==0)
	{
		player.ParamBase[(91)]=0;
		player.Say((39),"Сила");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=1;
		player.Say((39),"Восприятие");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=2;
		player.Say((39),"Выносливость");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=3;
		player.Say((39),"Харизма");
	}
	if(answerI==4)
	{
		player.ParamBase[(91)]=4;
		player.Say((39),"Интеллект");
	}
	if(answerI==5)
	{
		player.ParamBase[(91)]=5;
		player.Say((39),"Ловкость");
	}
	if(answerI==6)
	{
		player.ParamBase[(91)]=6;
		player.Say((39),"Удача");
	}
}

void ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL(Critter&player,uint answerI,string&answerS)
{
	Critter@target=GetCritter(player.Stat[(90)]);
	int parameter=player.Stat[(91)];
	if(!(@target!=null))
	return;
	if(answerS.length()>0)
	{
		int number=0;
		unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" изменил параметр "+parameter+" c "+target.ParamBase[parameter]+" у игрока "+target.Name+" "+target.Id+" -V- (НАЧАЛО) ",null);
		StrToInt(answerS,number);
		target.ParamBase[parameter]=number;
		player.Say((11),"вы изменили параметр "+parameter+" на "+number+" у игрока "+target.Id);
		unsafe_log_2(player,0,0,0,player.Name+" "+player.Id+" изменил параметр "+parameter+" на "+number+" -^- (КОНЕЦ)",null);
		ChangeCritterSpeed(target);
		if(parameter>=0&&parameter<=6)
		{
			player.ShowScreen((2),7,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
			player.Say((18),"SPECIAL игрока");
			player.Say((19+(0)),""+target.ParamBase[(0)]+" - сила");
			player.Say((19+(1)),""+target.ParamBase[(1)]+" - восприятие");
			player.Say((19+(2)),""+target.ParamBase[(2)]+" - выносливость");
			player.Say((19+(3)),""+target.ParamBase[(3)]+" - харизма");
			player.Say((19+(4)),""+target.ParamBase[(4)]+" - интеллект");
			player.Say((19+(5)),""+target.ParamBase[(5)]+" - ловкость");
			player.Say((19+(6)),""+target.ParamBase[(6)]+" - удача");
		}
		if(parameter>=200&&parameter<=210)
		{
			player.ShowScreen((2),11,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKILL1");
			player.Say((18),"Навыки игрока");
			player.Say((19+(0)),""+target.ParamBase[(200)]+" - легкое");
			player.Say((19+(1)),""+target.ParamBase[(201)]+" - тяжолое");
			player.Say((19+(2)),""+target.ParamBase[(202)]+" - энерго");
			player.Say((19+(3)),""+target.ParamBase[(203)]+" - рукопашная");
			player.Say((19+(4)),""+target.ParamBase[(204)]+" - холодное");
			player.Say((19+(5)),""+target.ParamBase[(205)]+" - метание");
			player.Say((19+(6)),""+target.ParamBase[(206)]+" - санитар");
			player.Say((19+(7)),""+target.ParamBase[(207)]+" - доктор");
			player.Say((19+(8)),""+target.ParamBase[(208)]+" - скрытность");
			player.Say((19+(9)),""+target.ParamBase[(209)]+" - взлом");
			player.Say((19+(10)),""+target.ParamBase[(210)]+" - кража");
		}
		if(parameter>=211&&parameter<=217)
		{
			player.ShowScreen((2),7,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_SKILL2");
			player.Say((18),"Навыки игрока");
			player.Say((19+(0)),""+target.ParamBase[(211)]+" - ловушки");
			player.Say((19+(1)),""+target.ParamBase[(212)]+" - наука");
			player.Say((19+(2)),""+target.ParamBase[(213)]+" - ремонт");
			player.Say((19+(3)),""+target.ParamBase[(214)]+" - разговор");
			player.Say((19+(4)),""+target.ParamBase[(215)]+" - торговля");
			player.Say((19+(5)),""+target.ParamBase[(216)]+" - игра");
			player.Say((19+(6)),""+target.ParamBase[(217)]+" - скиталец");
		}
		if(parameter==(72)||parameter==(7)||parameter==(70)||parameter==(71))
		{
			player.ShowScreen((2),4,"answer_GM_PANNEL_CRITTER_PLAYER_STATS_PARAM");
			player.Say((18),"Дополнительные параметры");
			player.Say((19+(0)),""+target.ParamBase[(72)]+"Текущее хп");
			player.Say((19+(1)),""+target.ParamBase[(7)]+"макс хп");
			player.Say((19+(2)),""+target.ParamBase[(70)]+"возраст");
			player.Say((19+(3)),""+target.ParamBase[(71)]+"пол");
		}
	}
}

void GM_PANNEL_CRITTER_NPC(Critter&player,int crId,int param1,int param2,string@param3,int[]@param4)
{
	Critter@cr=GetCritter(crId);
	if(cr is null)
	return;
	if(player.GetAccess()>=(2))
	{
		player.StatBase[(90)]=crId;
		player.ShowScreen((2),4,"answer_GM_PANNEL_CRITTER_NPC");
		player.Say((18),"НПЦ, protoId - "+cr.GetProtoId()+", диалог - "+cr.ParamBase[(104)]);
		player.Say((19+(0)),"Режимы");
		player.Say((19+(1)),"Параметры");
		player.Say((19+(2)),"НПЦ-Параметры");
		player.Say((19+(3)),"Инвентарь");
	}
}

void answer_GM_PANNEL_CRITTER_NPC(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.StatBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		player.ShowScreen((2),14,"answer_GM_PANNEL_CRITTER_NPC_MODES");
		player.Say((18),"Режимы игрока");
		player.Say((19+(0)),""+cr.ParamBase[(517)]+" - нет дом гекса");
		player.Say((19+(1)),""+cr.ParamBase[(513)]+" - не запоминает врагов");
		player.Say((19+(2)),""+cr.ParamBase[(532)]+" - нелутаемость");
		player.Say((19+(3)),""+cr.ParamBase[(511)]+" - неворуемость");
		player.Say((19+(4)),""+cr.ParamBase[(536)]+" - непихаемость");
		player.Say((19+(5)),""+cr.ParamBase[(539)]+" - стоять");
		player.Say((19+(6)),""+cr.ParamBase[(540)]+" - нет бега");
		player.Say((19+(7)),""+cr.ParamBase[(524)]+" - нет травм");
		player.Say((19+(8)),""+cr.ParamBase[(531)]+" - несбиваемость");
		player.Say((19+(9)),""+cr.ParamBase[(512)]+" - неторгует");
		player.Say((19+(10)),""+cr.ParamBase[(535)]+" - только наличные");
		player.Say((19+(11)),""+cr.ParamBase[(541)]+" - не разговаривает");
		player.Say((19+(12)),""+cr.ParamBase[(522)]+" - беск патроны");
		player.Say((19+(13)),""+cr.ParamBase[(527)]+" - неуязвимость");
	}
	if(answerI==1)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_CRITTER_PLAYER_STATS");
		player.Say((18),"Параметры, protoId - "+cr.GetProtoId()+", диалог - "+cr.ParamBase[(104)]);
		player.Say((19+(0)),"SPECIAL");
		player.Say((19+(1)),"SKILLS 0-9");
		player.Say((19+(2)),"SKILLS 10-20");
		player.Say((19+(3)),"Травмы");
		player.Say((19+(4)),"Режимы");
		player.Say((19+(5)),"Скин/бодитайп");
		player.Say((19+(7)),"Доп парам");
		player.Say((19+(8)),"Лексема");
	}
	if(answerI==2)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_CRITTER_NPC_STATS");
		player.Say((18),"НПЦ параметры, protoId - "+cr.GetProtoId()+", диалог - "+cr.ParamBase[(104)]);
		player.Say((19+(0)),""+cr.ParamBase[(104)]+"Диалог");
		player.Say((19+(1)),""+cr.ParamBase[(105)]+"AI ID");
		player.Say((19+(2)),""+cr.ParamBase[(89)]+"NPC ROLE");
		player.Say((19+(3)),""+cr.ParamBase[(800)]+"хозяин");
		player.Say((19+(4)),""+cr.ParamBase[(106)]+"TEAM_ID");
		player.Say((19+(5)),"назад");
	}
	if(answerI==3)
	{
		player.ShowContainer(cr,null,(8));
	}
}

void answer_GM_PANNEL_CRITTER_NPC_STATS(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.Stat[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		player.ToLife();
		player.ParamBase[(91)]=(104);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"DIALOG_ID");
	}
	if(answerI==1)
	{
		player.ParamBase[(91)]=(105);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"AI_ID");
	}
	if(answerI==2)
	{
		player.ParamBase[(91)]=(89);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"NPC_ROLE");
	}
	if(answerI==3)
	{
		player.ParamBase[(91)]=(800);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"MERC_MASTER_ID");
	}
	if(answerI==4)
	{
		player.ParamBase[(91)]=(106);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"TEAM_ID");
	}
	if(answerI==5)
	{
		GM_PANNEL_CRITTER_NPC(player,cr.Id,0,0,null,null);
	}
}

void answer_GM_PANNEL_CRITTER_NPC_MODES(Critter&player,uint answerI,string&answerS)
{
	Critter@cr=GetCritter(player.ParamBase[(90)]);
	if(cr is null)
	return;
	if(answerI==0)
	{
		if(cr.ModeBase[(517)]==0)
		cr.ModeBase[(517)]=1;
		else
		cr.ModeBase[(517)]=0;
	}
	if(answerI==1)
	{
		if(cr.ModeBase[(513)]==0)
		cr.ModeBase[(513)]=1;
		else
		cr.ModeBase[(513)]=0;
	}
	if(answerI==2)
	{
		if(cr.ModeBase[(532)]==0)
		cr.ModeBase[(532)]=1;
		else
		cr.ModeBase[(532)]=0;
	}
	if(answerI==3)
	{
		if(cr.ModeBase[(511)]==0)
		cr.ModeBase[(511)]=1;
		else
		cr.ModeBase[(511)]=0;
	}
	if(answerI==4)
	{
		if(cr.ModeBase[(536)]==0)
		cr.ModeBase[(536)]=1;
		else
		cr.ModeBase[(536)]=0;
	}
	if(answerI==5)
	{
		if(cr.ModeBase[(539)]==0)
		cr.ModeBase[(539)]=1;
		else
		cr.ModeBase[(539)]=0;
	}
	if(answerI==6)
	{
		if(cr.ModeBase[(540)]==0)
		cr.ModeBase[(540)]=1;
		else
		cr.ModeBase[(540)]=0;
	}
	if(answerI==7)
	{
		if(cr.ModeBase[(524)]==0)
		cr.ModeBase[(524)]=1;
		else
		cr.ModeBase[(524)]=0;
	}
	if(answerI==8)
	{
		if(cr.ModeBase[(531)]==0)
		cr.ModeBase[(531)]=1;
		else
		cr.ModeBase[(531)]=0;
	}
	if(answerI==9)
	{
		if(cr.ModeBase[(512)]==0)
		cr.ModeBase[(512)]=1;
		else
		cr.ModeBase[(512)]=0;
	}
	if(answerI==10)
	{
		if(cr.ModeBase[(535)]==0)
		cr.ModeBase[(535)]=1;
		else
		cr.ModeBase[(535)]=0;
	}
	if(answerI==11)
	{
		if(cr.ModeBase[(541)]==0)
		cr.ModeBase[(541)]=1;
		else
		cr.ModeBase[(541)]=0;
	}
	if(answerI==12)
	{
		if(cr.ModeBase[(522)]==0)
		cr.ModeBase[(522)]=1;
		else
		cr.ModeBase[(522)]=0;
	}
	if(answerI==13)
	{
		if(cr.ModeBase[(527)]==0)
		cr.ModeBase[(527)]=1;
		else
		cr.ModeBase[(527)]=0;
	}
} 

void GM_PANNEL_ITEM(Critter&player,int itemId,int param1,int param2,string@param3,int[]@param4)
{
	if(player.GetAccess()>=(2))
	{
		Item@item=GetItem(itemId);
		if(item is null)
		return;
		player.StatBase[(90)]=itemId;
		player.ShowScreen((2),2,"answer_GM_PANNEL_ITEM");
		player.Say((18),"Предмет, protoID ="+item.GetProtoId()+", ид ="+itemId);
		player.Say((19+(0)),"переменные");
		player.Say((19+(1)),"назначить скрипт");
	}
}

void answer_GM_PANNEL_ITEM(Critter&player,uint answerI,string&answerS)
{
	Item@item=GetItem(player.StatBase[(90)]);
	if(item is null)return;
	if(answerI==0)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_ITEM_VALS");
		player.Say((18),"Предмет, protoID ="+item.GetProtoId()+", ид ="+item.Id);
		player.Say((19+(0)),""+item.Val0+" Val0");
		player.Say((19+(1)),""+item.Val1+" Val1");
		player.Say((19+(2)),""+item.Val2+" Val2");
		player.Say((19+(3)),""+item.Val3+" Val3");
		player.Say((19+(4)),""+item.Val4+" Val4");
		player.Say((19+(5)),""+item.Val5+" Val5");
		player.Say((19+(6)),""+item.Val6+" Val6");
		player.Say((19+(7)),""+item.Val7+" Val7");
		player.Say((19+(8)),""+item.Val8+" Val8");
	}
	if(answerI==1)
	{
		player.ShowScreen((2),1,"answer_GM_PANNEL_ITEM_SCRIPT");
		player.Say((18),"Предмет, protoID ="+item.GetProtoId()+", ид ="+item.Id);
		player.Say((19+(0)),"верстак");
	}
}

void answer_GM_PANNEL_ITEM_SCRIPT(Critter&player,uint answerI,string&answerS)
{
	Item@item=GetItem(player.StatBase[(90)]);
	if(item is null)
	return;
	if(answerI==0)
	{
		if(item.GetProtoId()!=157){player.Say((11),"Не тот прототип.");return;}
		else SetWorkbench(player,item.Id,0,0);
	}
}

void answer_GM_PANNEL_ITEM_VALS(Critter&player,uint answerI,string&answerS)
{
	Item@item=GetItem(player.StatBase[(90)]);
	if(item is null)
	return;
	player.ParamBase[(91)]=answerI;
	player.ShowScreen((5),0,"gm@ask_GM_PANNEL_ITEM");
	player.Say((39),"Val"+answerI);
}

void ask_GM_PANNEL_ITEM(Critter&player,uint answerI,string&answerS)
{
	Item@item=GetItem(player.StatBase[(90)]);
	if(item is null)return;
	if(answerS.length()>0)
	{
		int val_number=player.StatBase[(91)];
		int number=0;
		StrToInt(answerS,number);
		switch(val_number)
		{
			case 0:item.Val0=number;break;
			case 1:item.Val1=number;break;
			case 2:item.Val2=number;break;
			case 3:item.Val3=number;break;
			case 4:item.Val4=number;break;
			case 5:item.Val5=number;break;
			case 6:item.Val6=number;break;
			case 7:item.Val7=number;break;
			case 8:item.Val8=number;break;
		}
		player.Say((11),"вы изменили val"+val_number+" на "+number+" у предмета "+item.Id);
		
		player.ShowScreen((2),9,"answer_GM_PANNEL_ITEM_VALS");
		player.Say((18),"Предмет, protoID ="+item.GetProtoId()+", ид ="+item.Id);
		player.Say((19+(0)),""+item.Val0+" Val0");
		player.Say((19+(1)),""+item.Val1+" Val1");
		player.Say((19+(2)),""+item.Val2+" Val2");
		player.Say((19+(3)),""+item.Val3+" Val3");
		player.Say((19+(4)),""+item.Val4+" Val4");
		player.Say((19+(5)),""+item.Val5+" Val5");
		player.Say((19+(6)),""+item.Val6+" Val6");
		player.Say((19+(7)),""+item.Val7+" Val7");
		player.Say((19+(8)),""+item.Val8+" Val8");
	}
}  

void GM_PANNEL_HEX(Critter&player,int hexX,int hexY,int param2,string@param3,int[]@param4)
{
	if(player.GetAccess()>=(2))
	{
		player.ShowScreen((2),4,"answer_GM_PANNEL_HEX");
		player.Say((18),"Действия с пустым гексом x "+hexX+" y "+hexY);
		player.ParamBase[(803)]=hexX;
		player.ParamBase[(804)]=hexY;
		player.Say((19+(0)),"повтор спавн");
		player.Say((19+(1)),"создать нпц");
		player.Say((19+(2)),"эффекты");
		player.Say((19+(3)),"музыка");
	}
}

void answer_GM_PANNEL_HEX(Critter&player,uint answerI,string&answerS)
{
	int type=player.ParamBase[(806)],
	weapon=player.ParamBase[(807)],
	AI_type=player.ParamBase[(805)],
	hexX=player.ParamBase[(803)],
	hexY=player.ParamBase[(804)],
	bonus_hp=player.ParamBase[(808)],
	bonus_dmg=player.ParamBase[(809)],
	bonus_skill=player.ParamBase[(810)];
	if(answerI==0)
	{
		Map@map=player.GetMap();
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==1)
	{
		string plead;
		player.ShowScreen((2),12,"answer_GM_PANNEL_HEX_SPAWN");
		player.Say((18),"Выберите тип спавна нпц, АИ="+AI_type+", ХП+="+bonus_hp+", Дмг+="+bonus_dmg+", skill+="+bonus_skill);
		player.Say((19+(0)),"АИ = "+AI_type);
		player.Say((19+(1)),"животные");
		player.Say((19+(2)),"монстры");
		player.Say((19+(3)),"рейдеры");
		player.Say((19+(4)),"мутанты");
		player.Say((19+(5)),"гражданские");
		player.Say((19+(6)),"разное");
		player.Say((19+(7)),"бонус хп");
		player.Say((19+(8)),"бонус дмг");
		player.Say((19+(9)),"бонус скил");
		player.Say((19+(10)),"назад");
	}
	if(answerI==2)
	{
		string plead;
		player.ShowScreen((2),6,"answer_GM_PANNEL_HEX_EFFECTS");
		player.Say((18),"Выберите эффект");
		player.Say((19+(0)),"Дождь 0");
		player.Say((19+(1)),"Дождь 50");
		player.Say((19+(2)),"Дождь 100");
		player.Say((19+(3)),"Дождь 150");
		player.Say((19+(4)),"Дождь 200");
		player.Say((19+(5)),"Дождь 250");
	}
	if(answerI==3)
	{
		string plead;
		player.ShowScreen((2),12,"answer_GM_PANNEL_MUSIC");
		player.Say((18),"Выберите музыку");
		player.Say((19+(0)),"Эмбиент 1");
		player.Say((19+(1)),"Хоррор 1");
		player.Say((19+(2)),"Kay_Kyser");
		player.Say((19+(3)),"Ветер 1");
		player.Say((19+(4)),"Ветер 2");
		player.Say((19+(5)),"Panzertank");
		player.Say((19+(6)),"Шторм легк.");
		player.Say((19+(7)),"Шторм тяж.");
		player.Say((19+(8)),"Шторм пуст.");
		player.Say((19+(9)),"Шторм пуст. 2");
		player.Say((19+(10)),"Шторм пуст. 3");
		player.Say((19+(11)),"Шторм дож.");
	}
}

void answer_GM_PANNEL_HEX_SPAWN(Critter&player,uint answerI,string&answerS)
{
	int AI_type=player.ParamBase[(805)],
	weapon=player.ParamBase[(807)],
	bonus_hp=player.ParamBase[(808)],
	bonus_dmg=player.ParamBase[(809)],
	bonus_skill=player.ParamBase[(810)];
	if(answerI==0)
	{
		player.ShowScreen((2),7,"answer_GM_PANNEL_HEX_SPAWN_AI");
		player.Say((18),"АИ, текущее - "+player.ParamBase[(805)]);
		player.Say((19+(0)),"0 - контроль");
		player.Say((19+(1)),"1 - животн");
		player.Say((19+(2)),"2 - агрессия");
		player.Say((19+(3)),"3 - охрана");
		player.Say((19+(4)),"4 - лидер");
		player.Say((19+(5)),"5 - миньон");
		player.Say((19+(6)),"6 - болванка");
	}
	if(answerI==1)
	{
		player.ShowScreen((2),14,"answer_GM_PANNEL_HEX_SPAWN_ANIMAL");
		player.Say((18),"Выберите вид животного, АИ="+AI_type+", ХП+="+bonus_hp+", Дмг+="+bonus_dmg+", skill+="+bonus_skill);
		player.Say((19+(0)),"крыса");
		player.Say((19+(1)),"мантис");
		player.Say((19+(2)),"муравей");
		player.Say((19+(3)),"свинокрыс");
		player.Say((19+(4)),"кротокрыс");
		player.Say((19+(5)),"большой кротокрыс");
		player.Say((19+(6)),"гекко");
		player.Say((19+(7)),"золотой гекко");
		player.Say((19+(8)),"собака");
		player.Say((19+(9)),"малый скорпион");
		player.Say((19+(10)),"большой скорпион");
		player.Say((19+(11)),"брамин");
		player.Say((19+(12)),"хищ.цвет");
		player.Say((19+(13)),"назад");
	}
	if(answerI==2)
	{
		player.ShowScreen((2),9,"answer_GM_PANNEL_HEX_SPAWN_MONSTER");
		player.Say((18),"Выберите вид монстра, АИ="+AI_type+", ХП+="+bonus_hp+", Дмг+="+bonus_dmg+", skill+="+bonus_skill);
		player.Say((19+(0)),"чужой");
		player.Say((19+(1)),"малый коготь");
		player.Say((19+(2)),"большой коготь");
		player.Say((19+(3)),"серый коготь");
		player.Say((19+(4)),"огнегекко");
		player.Say((19+(5)),"кентавр");
		player.Say((19+(6)),"летун");
		player.Say((19+(7)),"болотник");
		player.Say((19+(8)),"назад");
	}
	if(answerI==3)
	{
		player.ShowScreen((2),11,"answer_GM_PANNEL_HEX_SPAWN_RAIDER");
		player.Say((18),"Выберите вид рейдера, АИ="+AI_type+", ХП+="+bonus_hp+", Дмг+="+bonus_dmg+", skill+="+bonus_skill+", оружие="+weapon);
		player.Say((19+(0)),"кан.+нож");
		player.Say((19+(1)),"кан.+копье");
		player.Say((19+(2)),"кан.ж +нож");
		player.Say((19+(3)),"кан.ж +мяч");
		player.Say((19+(4)),"рейдер+дубин");
		player.Say((19+(5)),"рейдер+нож");
		player.Say((19+(6)),"рейдер+винтов");
		player.Say((19+(7)),"рейдер+пистолет");
		player.Say((19+(8)),"рейдерша+пистолет");
		player.Say((19+(9)),"рейдерша+копье");
		player.Say((19+(10)),"рейдерша+пп");
	}
	if(answerI==4)
	{
		player.Say((11),"Игрок не найден.");
	}
	if(answerI==5)
	{
		player.Say((11),"Игрок не найден.");
	}
	if(answerI==6)
	{
		player.ShowScreen((2),7,"answer_GM_PANNEL_HEX_SPAWN_RANDOM");
		player.Say((18),"Выберите вид криттера, АИ="+AI_type+", ХП+="+bonus_hp+", Дмг+="+bonus_dmg+", skill+="+bonus_skill+", оружие="+weapon);
		player.Say((19+(0)),"Муз. автомат");
		player.Say((19+(1)),"ББ пуст. Ж");
		player.Say((19+(2)),"ББ пуст. М");
		player.Say((19+(3)),"ББ сер. Ж");
		player.Say((19+(4)),"ББ сер. М");
		player.Say((19+(5)),"ББ кра. Ж");
		player.Say((19+(6)),"ББ кра. М");
	}
	if(answerI==7)
	{
		player.ParamBase[(91)]=(808);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"бонус хп");
	}
	if(answerI==8)
	{
		player.ParamBase[(91)]=(809);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"бонус дмг");
	}
	if(answerI==9)
	{
		player.ParamBase[(91)]=(810);
		player.ShowScreen((5),0,"gm@ask_GM_PANNEL_CRITTER_PLAYER_STATS_SPECIAL");
		player.Say((39),"бонус скилл");
	}
	if(answerI==10)
	{
		GM_PANNEL_HEX(player,player.ParamBase[(803)],player.ParamBase[(804)],0,null,null);
	}
	
}

void answer_GM_PANNEL_HEX_EFFECTS(Critter&player,uint answerI,string&answerS)
{
	Map@map=player.GetMap();
	if(answerI==0)
	{
		player.GetMap().SetRain(0);
	}
	if(answerI==1)
	{
		player.GetMap().SetRain(50);
		map.PlaySound("Groza_1.ogg");
	}
	if(answerI==2)
	{
		player.GetMap().SetRain(100);
	}
	if(answerI==3)
	{
		player.GetMap().SetRain(150);
	}
	if(answerI==4)
	{
		player.GetMap().SetRain(200);
	}
	if(answerI==5)
	{
		player.GetMap().SetRain(250);
	}
}

void answer_GM_PANNEL_MUSIC(Critter&player,uint answerI,string&answerS)
{
	Map@map=player.GetMap();
	if(answerI==0)
	{
		PlayMusic(map,"Under_1.ogg",1,1);
	}
	if(answerI==1)
	{
		PlayMusic(map,"Under_2.ogg",1,1);
	}
	if(answerI==2)
	{
		PlayMusic(map,"Kay_Kyser_1.ogg",1,1);
	}
	if(answerI==3)
	{
		map.PlaySound("vet_1.ogg");
	}
	if(answerI==4)
	{
		map.PlaySound("vet_2.ogg");
	}
	if(answerI==5)
	{
		PlayMusic(map,"panzertank.ogg",1,1);
	}
	if(answerI==6)
	{
		PlayMusic(map,"storm_1L.ogg",1,1);
	}
	if(answerI==7)
	{
		PlayMusic(map,"storm_1H.ogg",1,1);
	}
	if(answerI==8)
	{
		PlayMusic(map,"storm_1D.ogg",1,1);
	}
	if(answerI==9)
	{
		PlayMusic(map,"storm_2D.ogg",1,1);
	}
	if(answerI==10)
	{
		PlayMusic(map,"storm_3D.ogg",1,1);
	}
	if(answerI==11)
	{
		map.PlaySound("storm_1R.ogg");
	}
}

void answer_GM_PANNEL_HEX_SPAWN_AI(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		player.ParamBase[(805)]=0;
		player.Say((11),"Режим спавна - контроль.");
	}
	if(answerI==1)
	{
		player.ParamBase[(805)]=1;
		player.Say((11),"Режим спавна - животное.");
	}
	if(answerI==2)
	{
		player.ParamBase[(805)]=2;
		player.Say((11),"Режим спавна - атака.");
	}
	if(answerI==3)
	{
		player.ParamBase[(805)]=3;
		player.Say((11),"Режим спавна - охрана.");
	}
	if(answerI==4)
	{
		player.ParamBase[(805)]=4;
		player.Say((11),"Режим спавна - лидер.");
	}
	if(answerI==5)
	{
		player.ParamBase[(805)]=5;
		player.Say((11),"Режим спавна - миньон.");
	}
	if(answerI==6)
	{
		player.ParamBase[(805)]=6;
		player.Say((11),"Режим спавна - болванка.");
	}
}

void answer_GM_PANNEL_HEX_SPAWN_ANIMAL(Critter&player,uint answerI,string&answerS)
{
	if(answerI>=0&&answerI<=12)
	{
		Map@map=player.GetMap();
		player.ParamBase[(806)]=answerI+310;
		player.ParamBase[(807)]=0;
		
		int type=player.ParamBase[(806)],
		weapon=player.ParamBase[(807)],
		AI_type=player.ParamBase[(805)],
		hexX=player.ParamBase[(803)],
		hexY=player.ParamBase[(804)],
		bonus_hp=player.ParamBase[(808)],
		bonus_dmg=player.ParamBase[(809)],
		bonus_skill=player.ParamBase[(810)];
		
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	else if(answerI==13)
	GM_PANNEL_HEX(player,player.ParamBase[(803)],player.ParamBase[(804)],0,null,null);
}

void answer_GM_PANNEL_HEX_SPAWN_MONSTER(Critter&player,uint answerI,string&answerS)
{
	if(answerI>=0&&answerI<=7)
	{
		Map@map=player.GetMap();
		player.ParamBase[(806)]=answerI+323;
		player.ParamBase[(807)]=0;
		
		int type=player.ParamBase[(806)],
		weapon=player.ParamBase[(807)],
		AI_type=player.ParamBase[(805)],
		hexX=player.ParamBase[(803)],
		hexY=player.ParamBase[(804)],
		bonus_hp=player.ParamBase[(808)],
		bonus_dmg=player.ParamBase[(809)],
		bonus_skill=player.ParamBase[(810)];
		
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	else if(answerI==8)
	GM_PANNEL_HEX(player,player.ParamBase[(803)],player.ParamBase[(804)],0,null,null);
}

void answer_GM_PANNEL_HEX_SPAWN_RAIDER(Critter&player,uint answerI,string&answerS)
{
	int type=player.ParamBase[(806)],
	weapon=player.ParamBase[(807)],
	AI_type=player.ParamBase[(805)],
	hexX=player.ParamBase[(803)],
	hexY=player.ParamBase[(804)],
	bonus_hp=player.ParamBase[(808)],
	bonus_dmg=player.ParamBase[(809)],
	bonus_skill=player.ParamBase[(810)];
	
	if(answerI==0)
	{
		Map@map=player.GetMap();
		type=335;
		if(weapon==0)
		{
			weapon=(1418);
			if(Random(0,1)==0)
			weapon=(1419);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==1)
	{
		Map@map=player.GetMap();
		type=335;
		if(weapon==0)
		{
			weapon=(7);
			if(Random(0,5)==0)
			weapon=(1043);
		}
		
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==2)
	{
		Map@map=player.GetMap();
		type=336;
		if(weapon==0)
		{
			weapon=(1418);
			if(Random(0,1)==0)
			weapon=(1419);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==3)
	{
		Map@map=player.GetMap();
		type=336;
		if(weapon==0)
		{
			weapon=(1413);
			if(Random(0,1)==0)
			weapon=(1414);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==4)
	{
		Map@map=player.GetMap();
		type=337;
		if(weapon==0)
		{
			weapon=(1423);
			if(Random(0,1)==0)
			weapon=(1420);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==5)
	{
		Map@map=player.GetMap();
		type=337;
		if(weapon==0)
		{
			weapon=(4);
			if(Random(0,3)==0)
			weapon=(319);
			else if(Random(0,2)==0)
			weapon=(383);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==6)
	{
		Map@map=player.GetMap();
		type=337;
		if(weapon==0)
		{
			weapon=(1407);
			if(Random(0,2)==0)
			weapon=(1406);
			else if(Random(0,1)==0)
			weapon=(300);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==7)
	{
		Map@map=player.GetMap();
		type=337;
		if(weapon==0)
		{
			weapon=(299);
			if(Random(0,2)==0)
			weapon=(1408);
			else if(Random(0,5)==0)
			weapon=(1409);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==8)
	{
		Map@map=player.GetMap();
		type=338;
		if(weapon==0)
		{
			weapon=(1407);
			if(Random(0,2)==0)
			weapon=(1406);
			else if(Random(0,1)==0)
			weapon=(300);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==9)
	{
		Map@map=player.GetMap();
		type=338;
		if(weapon==0)
		{
			weapon=(7);
			if(Random(0,5)==0)
			weapon=(1043);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==10)
	{
		Map@map=player.GetMap();
		type=338;
		if(weapon==0)
		weapon=(1402);
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
}

void answer_GM_PANNEL_HEX_SPAWN_MUTANT(Critter&player,uint answerI,string&answerS)
{
	if(answerI==0)
	{
		player.Say((11),"Игрок не найден.");
	}
}

void answer_GM_PANNEL_HEX_SPAWN_RANDOM(Critter&player,uint answerI,string&answerS)
{
	int type=player.ParamBase[(806)],
	weapon=player.ParamBase[(807)],
	AI_type=player.ParamBase[(805)],
	hexX=player.ParamBase[(803)],
	hexY=player.ParamBase[(804)],
	bonus_hp=player.ParamBase[(808)],
	bonus_dmg=player.ParamBase[(809)],
	bonus_skill=player.ParamBase[(810)];
	
	if(answerI==0)
	{
		Map@map=player.GetMap();
		type=536;
		player.ParamBase[(531)]=1;
		player.ParamBase[(539)]=1;
		player.ParamBase[(536)]=1;
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==1)
	{
		Map@map=player.GetMap();
		type=530;
		if(weapon==0)
		{
			if(Random(0,15)==0)
			weapon=(8);
			else if(Random(0,15)==1)
			weapon=(23);
			else if(Random(0,15)==2)
			weapon=(10);
			else if(Random(0,15)==3)
			weapon=(1521);
			else if(Random(0,15)==4)
			weapon=(1415);
			else if(Random(0,15)==5)
			weapon=(23);
			else if(Random(0,15)==6)
			weapon=(600);
			else if(Random(0,15)==7)
			weapon=(385);
			else if(Random(0,15)==8)
			weapon=(143);
			else if(Random(0,15)==9)
			weapon=(160);
			else if(Random(0,15)==10)
			weapon=(235);
			else if(Random(0,15)==11)
			weapon=(600);
			else if(Random(0,15)==12)
			weapon=(385);
			else if(Random(0,15)==13)
			weapon=(115);
			else if(Random(0,15)==14)
			weapon=(116);
			else if(Random(0,15)==15)
			weapon=(25);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==2)
	{
		Map@map=player.GetMap();
		type=531;
		if(weapon==0)
		{
			if(Random(0,15)==0)
			weapon=(8);
			else if(Random(0,15)==1)
			weapon=(23);
			else if(Random(0,15)==2)
			weapon=(10);
			else if(Random(0,15)==3)
			weapon=(1521);
			else if(Random(0,15)==4)
			weapon=(1415);
			else if(Random(0,15)==5)
			weapon=(23);
			else if(Random(0,15)==6)
			weapon=(600);
			else if(Random(0,15)==7)
			weapon=(385);
			else if(Random(0,15)==8)
			weapon=(143);
			else if(Random(0,15)==9)
			weapon=(160);
			else if(Random(0,15)==10)
			weapon=(235);
			else if(Random(0,15)==11)
			weapon=(600);
			else if(Random(0,15)==12)
			weapon=(385);
			else if(Random(0,15)==13)
			weapon=(115);
			else if(Random(0,15)==14)
			weapon=(116);
			else if(Random(0,15)==15)
			weapon=(25);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==3)
	{
		Map@map=player.GetMap();
		type=528;
		if(weapon==0)
		{
			if(Random(0,15)==0)
			weapon=(8);
			else if(Random(0,15)==1)
			weapon=(23);
			else if(Random(0,15)==2)
			weapon=(10);
			else if(Random(0,15)==3)
			weapon=(1521);
			else if(Random(0,15)==4)
			weapon=(1415);
			else if(Random(0,15)==5)
			weapon=(23);
			else if(Random(0,15)==6)
			weapon=(600);
			else if(Random(0,15)==7)
			weapon=(385);
			else if(Random(0,15)==8)
			weapon=(143);
			else if(Random(0,15)==9)
			weapon=(160);
			else if(Random(0,15)==10)
			weapon=(235);
			else if(Random(0,15)==11)
			weapon=(600);
			else if(Random(0,15)==12)
			weapon=(385);
			else if(Random(0,15)==13)
			weapon=(115);
			else if(Random(0,15)==14)
			weapon=(116);
			else if(Random(0,15)==15)
			weapon=(25);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==4)
	{
		Map@map=player.GetMap();
		type=529;
		if(weapon==0)
		{
			if(Random(0,15)==0)
			weapon=(8);
			else if(Random(0,15)==1)
			weapon=(23);
			else if(Random(0,15)==2)
			weapon=(10);
			else if(Random(0,15)==3)
			weapon=(1521);
			else if(Random(0,15)==4)
			weapon=(1415);
			else if(Random(0,15)==5)
			weapon=(23);
			else if(Random(0,15)==6)
			weapon=(600);
			else if(Random(0,15)==7)
			weapon=(385);
			else if(Random(0,15)==8)
			weapon=(143);
			else if(Random(0,15)==9)
			weapon=(160);
			else if(Random(0,15)==10)
			weapon=(235);
			else if(Random(0,15)==11)
			weapon=(600);
			else if(Random(0,15)==12)
			weapon=(385);
			else if(Random(0,15)==13)
			weapon=(115);
			else if(Random(0,15)==14)
			weapon=(116);
			else if(Random(0,15)==15)
			weapon=(25);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==5)
	{
		Map@map=player.GetMap();
		type=540;
		if(weapon==0)
		{
			if(Random(0,15)==0)
			weapon=(8);
			else if(Random(0,15)==1)
			weapon=(23);
			else if(Random(0,15)==2)
			weapon=(10);
			else if(Random(0,15)==3)
			weapon=(1521);
			else if(Random(0,15)==4)
			weapon=(1415);
			else if(Random(0,15)==5)
			weapon=(23);
			else if(Random(0,15)==6)
			weapon=(600);
			else if(Random(0,15)==7)
			weapon=(385);
			else if(Random(0,15)==8)
			weapon=(143);
			else if(Random(0,15)==9)
			weapon=(160);
			else if(Random(0,15)==10)
			weapon=(235);
			else if(Random(0,15)==11)
			weapon=(600);
			else if(Random(0,15)==12)
			weapon=(385);
			else if(Random(0,15)==13)
			weapon=(115);
			else if(Random(0,15)==14)
			weapon=(116);
			else if(Random(0,15)==15)
			weapon=(25);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
	if(answerI==6)
	{
		Map@map=player.GetMap();
		type=541;
		if(weapon==0)
		{
			if(Random(0,15)==0)
			weapon=(8);
			else if(Random(0,15)==1)
			weapon=(23);
			else if(Random(0,15)==2)
			weapon=(10);
			else if(Random(0,15)==3)
			weapon=(1521);
			else if(Random(0,15)==4)
			weapon=(1415);
			else if(Random(0,15)==5)
			weapon=(23);
			else if(Random(0,15)==6)
			weapon=(600);
			else if(Random(0,15)==7)
			weapon=(385);
			else if(Random(0,15)==8)
			weapon=(143);
			else if(Random(0,15)==9)
			weapon=(160);
			else if(Random(0,15)==10)
			weapon=(235);
			else if(Random(0,15)==11)
			weapon=(600);
			else if(Random(0,15)==12)
			weapon=(385);
			else if(Random(0,15)==13)
			weapon=(115);
			else if(Random(0,15)==14)
			weapon=(116);
			else if(Random(0,15)==15)
			weapon=(25);
		}
		GM_SPAWN(player,map,type,weapon,AI_type,hexX,hexY,bonus_hp,bonus_dmg,bonus_skill);
		GM_PANNEL_HEX(player,hexX+Random(-1,1),hexY+Random(-1,1),0,null,null);
	}
} 

void Log_Killings(Critter&player,int target,int param1,int param2,string@param3,int[]@param4)
{
	file f;
	if(f.open("logs\\killings.txt","a")>=0)
	{
		string type;
		if(player.Param[(703)]==(0))
		type="Старт";
		else if(player.Param[(703)]==(1))
		type="Прикл.";
		else if(player.Param[(703)]==(2))
		type="Выжив.";
		else if(player.Param[(703)]==(3))
		type="Аркада";
		else if(player.Param[(703)]==(4))
		type="Тест";
		if(player.GetAccess()==(2))
		type+=" ГМ";
		else if(player.GetAccess()>(2))
		type+=" Админ";
		else
		type="ошибка";
		string type2;
		if(GetCritter(target).Param[(703)]==(0))
		type2="Старт";
		else if(GetCritter(target).Param[(703)]==(1))
		type2="Прикл.";
		else if(GetCritter(target).Param[(703)]==(2))
		type2="Выжив.";
		else if(GetCritter(target).Param[(703)]==(3))
		type2="Аркада";
		else if(GetCritter(target).Param[(703)]==(4))
		type2="Тест";
		else
		type="ошибка";
		string date=TimeToString(player);
		Map@map=player.GetMap();
		string place;
		if(map.GetProtoId()==1)
		place="богатый район";
		else if(map.GetProtoId()==4)
		place="административный";
		else if(map.GetProtoId()==6)
		place="рабочий район";
		else if(map.GetProtoId()==9)
		place="бедный район";
		else if(map.GetProtoId()==10)
		place="ворота модока";
		else if(map.GetProtoId()==13)
		place="лесопилка модока";
		else
		place=map.GetProtoId();
		f.writeString(""+date+"\t"+place+"\t"+type+"\t"+player.Id+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" убил "+type2+" "+"\t"+target+"\t"+GetPlayerName(target)+"\n");
		f.close();
		Critter@[]crs;
		GetAllPlayers(crs);
		string str="|0xFFFF0000 <|0xFFFFFF00"+type+" "+GetPlayerName(player.Id)+" ("+player.Id+")  "+" убил "+type2+" "+GetPlayerName(target)+" ("+target+")|0xFFFF0000 > |0xFFBB33CC";
		for(uint i=0,j=crs.length();i<j;i++)
		{
			if(crs[i]is null or crs[i].GetAccess()<(2))
			continue;
			crs[i].Say((11),str);
		}
	}
}

void Log_GM(Critter&player,int crId,int action,int param0,int param1,int param2)
{
	string crname;
	Critter@cr=GetCritter(crId);
	if(cr!is null)
	crname=GetPlayerName(crId);
	string date=TimeToString(player);
	
	if(action==(1))
	{
		string pass;
		if(param0==0)
		{
			if(param1==0)
			pass="чужака";
			if(param1==11)
			pass="гостя";
			if(param1==12)
			pass="гражданина";
		}
		else if(param0==1)
		pass="принудительно чужака";
		else if(param0==2)
		pass="принудительно гостя";
		else if(param0==3)
		pass="принудительно гражданина";
		else if(param0==4)
		pass="принудительно выживальца";
		
		file f;
		if(f.open("logs\\gm\\"+GetPlayerName(player.Id)+".txt","r")<0)
		{
			if(f.open("logs\\gm\\"+GetPlayerName(player.Id)+".txt","w")>=0)
			{
				f.close();
			}
			else
			Log("cant create log file for GM , ID = "+player.Id);
		}
		if(f.open("logs\\gm\\"+GetPlayerName(player.Id)+".txt","a")>=0)
		{
			f.writeString(""+date+"\t"+" активировал "+crId+" "+crname+" как "+pass+"\n");
			f.close();
		}
		if(f.open("logs\\gm\\activations.txt","a")>=0)
		{
			f.writeString(""+date+"\t"+player.Id+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" активировал "+crId+" "+crname+" как "+pass+"\n");
			f.close();
		}
	}
}

void Log_Crims(Critter&player,int target,int param1,int param2,string@param3,int[]@param4)
{
	file f;
	if(f.open("logs\\crims.txt","a")>=0)
	{
		string date=TimeToString(player);
		f.writeString(""+date+"\t"+player.Id+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" лутал охотки с гвардов"+"\n");
		f.close();
	}
}

void Log_Lockpick(Critter&player,int lock,int force,int succes,string@param3,int[]@param4)
{
	string type;
	if(player.Param[(703)]==(0))
	type="Старт";
	else if(player.Param[(703)]==(1))
	type="Прикл.";
	else if(player.Param[(703)]==(2))
	type="Выжив.";
	else if(player.Param[(703)]==(3))
	type="Аркада";
	else if(player.Param[(703)]==(4))
	type="Тест";
	if(player.GetAccess()==(2))
	type+=" ГМ";
	else if(player.GetAccess()>(2))
	type+=" Админ";
	else
	type="ошибка";
	Map@map=player.GetMap();
	string place;
	if(map.GetProtoId()==1)
	place="богатый район";
	else if(map.GetProtoId()==4)
	place="административный";
	else if(map.GetProtoId()==6)
	place="рабочий район";
	else if(map.GetProtoId()==9)
	place="бедный район";
	else if(map.GetProtoId()==10)
	place="ворота модока";
	else if(map.GetProtoId()==13)
	place="лесопилка модока";
	else
	place=map.GetProtoId();
	string date=TimeToString(player);
	
	Item@locker=GetItem(lock);
	string compl=locker.LockerComplexity;
	
	if(force==0)
	{
		file f;
		if(f.open("logs\\lockpick.txt","a")>=0)
		{
			f.writeString(""+date+"\t"+player.Id+"\t"+type+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" вскрывал замок "+lock+" сложностью "+compl+" в "+"\t"+place+"\n");
			f.close();
		}
	}
	if(force==0&&succes==1)
	{
		file f;
		if(f.open("logs\\lockpick.txt","a")>=0)
		{
			f.writeString(""+date+"\t"+player.Id+"\t"+type+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" успешно вскрыл замок "+lock+" сложностью "+compl+" в "+"\t"+place+"\n");
			f.close();
		}
	}
	if(force==1)
	{
		file f;
		if(f.open("logs\\lockpick.txt","a")>=0)
		{
			f.writeString(""+date+"\t"+player.Id+"\t"+type+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" ломал замок "+lock+" сложностью "+compl+" в "+"\t"+place+"\n");
			f.close();
		}
	}
}

void Log_Steal(Critter&player,int target,int item,int succes,string@param3,int[]@param4)
{
	string type;
	if(player.Param[(703)]==(0))
	type="Старт";
	else if(player.Param[(703)]==(1))
	type="Прикл.";
	else if(player.Param[(703)]==(2))
	type="Выжив.";
	else if(player.Param[(703)]==(3))
	type="Аркада";
	else if(player.Param[(703)]==(4))
	type="Тест";
	if(player.GetAccess()==(2))
	type+=" ГМ";
	else if(player.GetAccess()>(2))
	type+=" Админ";
	else
	type="ошибка";
	Map@map=player.GetMap();
	string place;
	if(map.GetProtoId()==1)
	place="богатый район";
	else if(map.GetProtoId()==4)
	place="административный";
	else if(map.GetProtoId()==6)
	place="рабочий район";
	else if(map.GetProtoId()==9)
	place="бедный район";
	else if(map.GetProtoId()==10)
	place="ворота модока";
	else if(map.GetProtoId()==13)
	place="лесопилка модока";
	else
	place=map.GetProtoId();
	string date=TimeToString(player);
	
	string targetname="";
	Critter@cr=GetCritter(target);
	if(cr.IsPlayer())
	targetname=GetPlayerName(target);
	
	file f;
	if(f.open("logs\\steal.txt","a")>=0)
	{
		f.writeString(""+date+"\t"+player.Id+"\t"+type+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" украл у "+"\t"+target+"\t"+targetname+"предмет "+item+" в "+"\t"+place+"\n");
		f.close();
	}
}

void Log_factions(Critter&player,int crId,int mode,int level,string@param3,int[]@param4)
{
	string type;
	string acces;
	if(player.GetAccess()==(2))
	acces="ГМ  ";
	else if(player.GetAccess()>(2))
	acces="Админ  ";
	string date=TimeToString(player);
	file f;
	if(f.open("logs\\factions.txt","a")>=0)
	{
		if(mode==0)
		{
			if(level==0)
			type="Старт";
			else if(level==1)
			type="Прикл.";
			else if(level==2)
			type="Выжив.";
			else if(level==3)
			type="Аркада";
			else if(level==4)
			type="Тест";
			else
			type="ошибка";
			f.writeString(""+date+"\t"+player.Id+acces+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" изменил режим игры -  "+crId+"\t"+GetPlayerName(crId)+"\t"+"\t на   "+type+"\n");
		}
		else if(mode==1)
		{
			if(level==0)
			type="Чужой";
			else if(level==1)
			type="врем. гость";
			else if(level==2)
			type="гость";
			else if(level==3)
			type="гражданин";
			else if(level==4)
			type="богатый гражданин";
			else if(level==10)
			type="изгой";
			else
			type="ошибка";
			f.writeString(""+date+"\t"+player.Id+acces+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" изменил пропуск -  "+crId+"\t"+GetPlayerName(crId)+"\t"+"\t на   "+type+"\n");
		}
		else if(mode==2)
		{
			if(level==0)
			type="без фракции";
			else if(level==1)
			type="администрация";
			else if(level==2)
			type="полиция";
			else if(level==3)
			type="мафия";
			else if(level==4)
			type="мутанты";
			else if(level==5)
			type="форт";
			else if(level==6)
			type="рейдеры";
			else
			type="ошибка";
			f.writeString(""+date+"\t"+player.Id+acces+"\t"+GetPlayerName(player.Id)+"\t"+"\t"+" изменил фракцию -  "+crId+"\t"+GetPlayerName(crId)+"\t"+"\t на   "+type+"\n");
		}
		f.close();
	}
}  

import void BanId(Critter&player,int id,int hours,int kick)from"banhammer";
import void KickId(Critter&player,int id,int,int)from"banhammer";
import void KickBanIdIp(Critter&player,int id,int hours,int mask_level)from"banhammer";
import void UnbanId(Critter&player,int id,int,int)from"banhammer";
import void GetIps(Critter&player,int id,int,int)from"banhammer";
import void GM_HardBanId(Critter&player,int id)from"banhammer";

void banid(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	BanId(player,param0,param1,param2);
}

void kickid(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	KickId(player,param0,0,0);
}

void kickbanipid(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	KickBanIdIp(player,param0,param1,param2);
}

void unbanid(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	UnbanId(player,param0,0,0);
}

void getips(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	GetIps(player,param0,0,0);
}

void statcompareradius(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	Critter@[]crs;  
	
	if(player.GetMap().GetCrittersHex(player.HexX,player.HexY,param1,(0x0F)|(0x10),crs)>0)
	{
		CrittersStatCompare(player,crs,uint16(param0));
	}
}

void statcompare(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	Critter@[]crs;
	for(uint8 i=0,j=param4.length();i<j;++i)
	{
		Critter@cr=GetCritter(param4[i]);
		if(cr is null)
		continue;
		crs.insertLast(cr);
	}
	CrittersStatCompare(player,crs,uint16(param0));
}

void CrittersStatCompare(Critter&player,Critter@[]&crs,uint16 stat)
{ 
	
	uint16 minVal=0,maxVal=0;
	uint minId=0,maxId=0;
	
	for(uint16 i=0,j=crs.length();i<j;++i)
	{
		uint16 statVal=crs[i].Param[stat];
		if(statVal>maxVal)
		{
			minVal=statVal;
			minId=crs[i].Id;
		}
		else if(statVal<minVal)
		{
			minVal=statVal;
			minId=crs[i].Id;
		}
	}
	
	player.Say((11),"стат : "+stat+"\nминимальное значение : "+minVal+" id : "+minId+"\nмаксимальное значени : "+maxVal+" id : "+minId);
} 

void killbytype(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	Critter@target=GetCritter(param0);
	if(target is null)
	{
		player.Say((11),"неверный криттер");
		return;
	}
	
	uint16 deadType=0;
	if(param1>0&&param1<9)
	deadType=(110)-1+param1;
	else
	deadType=(Random(0,1)>0?(102):(103));              
	
	target.ToDead(deadType,null);
	
}

void GM_teleport_to_next_player(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	Critter@[]crs;
	GetAllPlayers(crs);
	if(player.StatBase[(90)]>=crs.length())
	{
		player.StatBase[(90)]=0;
		player.EraseTimeEvents(7);
	}
	Critter@daddy=crs[player.StatBase[(90)]];
	if(not(@daddy!=null))
	{
		player.Say((11),"неверный криттер");
		player.StatBase[(90)]++;
		return;
	}
	player.StatBase[(90)]++;
	if(daddy.Id==player.Id)
	return;
	Map@map=daddy.GetMap();
	if(not(@map!=null))
	{
		player.Say((11),"игрок "+GetPlayerName(daddy.Id)+" на глобале");
		return;
	}
	else if(map.GetProtoId()==90)
	{
		player.Say((11),"игрок "+GetPlayerName(daddy.Id)+" на карте обучения");
		return;
	}
	else if(map.GetProtoId()==92)
	{
		player.Say((11),"игрок "+GetPlayerName(daddy.Id)+" на стартовой карте");
		return;
	}
	uint[]rates;
	player.GetTimeEvents(7,null,null,rates);
	for(uint ii=0;ii<rates.length();ii++)
	{
		if(rates[ii]==daddy.Id)
		{
			player.Say((11),"игрока "+GetPlayerName(daddy.Id)+" уже просматривали ранее");
			return;
		}
	}
	
	uint8 temp_dir=Random(0,5);
	for(uint i=0;i<6;i++)
	{
		uint16 hexX=daddy.HexX,hexY=daddy.HexY;
		map.MoveHexByDir(hexX,hexY,(temp_dir+i)%6,1);
		if(not map.IsHexPassed(hexX,hexY))continue;
		player.TransitToMap(map.Id,hexX,hexY,0);
		player.Say((11),"вы прыгнули к игроку "+GetPlayerName(daddy.Id)+" "+daddy.Id);
		Critter@[]critters;
		map.GetCrittersHex(hexX,hexY,20,(0x0F)|(0x10),critters);
		for(uint j=0;j<critters.length();j++)
		{
			player.AddTimeEvent("cte_visited",10*60*__TimeMultiplier,7,critters[j].Id);
		}
		break;
	}
}

uint cte_visited(Critter&cr,int identifier,uint&rate)
{
	return 0;
} 

void GM_CONTROLPANNEL_CRITTER(Critter&player,int crId,int param1,int param2,string@param3,int[]@param4)
{
	if(player.GetAccess()>=(2))
	{
		player.ShowScreen((2),5,"answer_GM_PANNEL_SELF");
		player.Say((18),"ГМ ПАНЕЛЬ");
		player.Say((19+(0)),"Режимы себя");
	}
}

void GM_CONTROLPANNEL_HEX(Critter&player,int crId,int param1,int param2,string@param3,int[]@param4)
{
	if(player.GetAccess()>=(2))
	{
		player.ShowScreen((2),5,"answer_GM_PANNEL_SELF");
		player.Say((18),"ГМ ПАНЕЛЬ");
		player.Say((19+(0)),"Режимы себя");
	}
}                                                                 

import void GM_MobInit(Critter&npc)from"mob";
import void GM_MobBossInit(Critter&npc)from"mob";
import void GM_MobMinionInit(Critter&npc)from"mob";
import void GM_InitCommonGuard(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)from"guards";
import bool AddAttackPlane(Critter&npc,uint priority,Critter&target,bool run)from"npc_planes";

void GM_SPAWN(Critter&player,Map&map,int type,int weapon,int AI_type,uint16 hexX,uint16 hexY,int bonus_hp,int bonus_dmg,int bonus_skill)
{
	Critter@cr=map.AddNpc(type,hexX,hexY,Random(0,5),null,null,null);
	if((@cr!=null))
	{
		cr.SetEvent((2),"_OnDeadEvent");
		cr.StatBase[(105)]=207;
		cr.ParamBase[(805)]=10;
		cr.ParamBase[(800)]=player.Id;
		cr.StatBase[(84)]=__FullSecond+((2)*__TimeMultiplier*3600);
		cr.ModeBase[(517)]=0;
		cr.ModeBase[(522)]=1;
		
		cr.ParamBase[(7)]=cr.ParamBase[(7)]+bonus_hp;
		cr.ParamBase[(10)]=cr.ParamBase[(10)]+bonus_dmg;
		cr.ParamBase[(200)]=cr.ParamBase[(200)]+bonus_skill;
		cr.ParamBase[(201)]=cr.ParamBase[(201)]+bonus_skill;
		cr.ParamBase[(202)]=cr.ParamBase[(202)]+bonus_skill;
		cr.ParamBase[(203)]=cr.ParamBase[(203)]+bonus_skill;
		cr.ParamBase[(204)]=cr.ParamBase[(204)]+bonus_skill;
		cr.ParamBase[(205)]=cr.ParamBase[(205)]+bonus_skill;
		
		if(weapon>0)
		cr.AddItem(weapon,1);
	}
	if(AI_type==0&&(@player!=null))
	{
		gmcontrolMob(player,cr.Id,0,0,null,null);
	}
	else if(AI_type==1)
	{
		GM_MobInit(cr);
	}
	else if(AI_type==2)
	{
		Critter@[]players,guards;
		Map@map=player.GetMap();
		if((@player!=null)&&(@cr!=null)&&map.GetCritters(0,(0x03)|(0x10),players)>0)
		{
			for(uint j=0,jj=players.length();j<jj;j++)
			{
				if(players[j].Id!=cr.ParamBase[(800)])
				{
					AddAttackPlane(cr,0,players[j],__RunOnCombat);
					cr.AddEnemyInStack(players[j].Id);
				}
			}
		}
	}
	else if(AI_type==3)
	{
		GM_InitCommonGuard(player,cr.Id,0,0,null,null);
	}
	else if(AI_type==4)
	{
		GM_MobBossInit(cr);
	}
	else if(AI_type==5)
	{
		GM_MobMinionInit(cr);
	}
}

void gmcontrolMob(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	player.RunClientScript("client_gui@_SetControlCritters",param0,0,0,null,null);
}

void _OnDeadEvent(Critter&dead,Critter@killer)
{
	dead.AddTimeEvent("cte_deleteCorpse",60*60*2,(12));
}

uint cte_deleteCorpse(Critter&dead,int identifier,uint&rate)
{
	DeleteNpc(dead);
	return 0;
}

string TimeToString(Critter&player)
{
	uint16 year=0;
	uint16 month=0;
	uint16 dayOfWeek=0;
	uint16 day=0;
	uint16 hour=0;
	uint16 minute=0;
	uint16 second=0;
	uint16 milliseconds=0;
	GetTime(year,month,day,dayOfWeek,hour,minute,second,milliseconds);
	return""+(day>9?(""+day):("0"+day))+"."+(month>9?(""+month):("0"+month))+"."+year+" "+(hour>9?(""+hour):("0"+hour))+":"+(minute>9?(""+minute):("0"+minute));
} 

import void arcadehiveinsert(Critter&cr,uint16 x,uint16 y,uint8 type)from"arcade_menu";
import void arcadehivelist(Critter&cr)from"arcade_menu";
import void arcadehiveclear(Critter&cr)from"arcade_menu";
import void arcadehivedelone(Critter&cr,uint8 index)from"arcade_menu";

void hiveadd(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	arcadehiveinsert(player,param0,param1,param2);
}

void hivedel(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	arcadehivedelone(player,param0);
}

void hivelist(Critter&player,int param0,int param1,int param2,string@param3,int[]@param4)
{
	arcadehivelist(player);
}

import int CellLocationCreate(int pid,int x,int y,int force)from"globalmap_group";
import int CellLocationCreate(int pid,int x,int y,int wild,int livetime,int force)from"globalmap_group";
import int CellLocationMove(int x,int y,int x1,int y1)from"globalmap_group";
import int CellLocationDelete(int x,int y)from"globalmap_group";
import int CellLocationSize(int x,int y,int sizeX,int sizeY)from"globalmap_group"; 

void cell_create_wild(Critter&cr,int x,int y,int p2,string@message,int[]@p4)
{
	CellLocationCreate(p4[0],p4[1],p4[2],p4[3],p4[4],p4[5]);
}

void cell_create(Critter&cr,int x,int y,int p2,string@message,int[]@p4)
{
	CellLocationCreate(p4[0],p4[1],p4[2],p4[3]);
}

void cell_move(Critter&cr,int x,int y,int p2,string@message,int[]@p4)
{
	CellLocationMove(p4[0],p4[1],p4[2],p4[3]);
}

void cell_del(Critter&cr,int x,int y,int p2,string@message,int[]@p4)
{
	cr.Say((11),"code : "+CellLocationDelete(p4[0],p4[1]));
}

void cell_size(Critter&cr,int x,int y,int p2,string@message,int[]@p4)
{
	cr.Say((11),"code : "+CellLocationSize(p4[0],p4[1],p4[2],p4[3]));
}

import void AccountDataBaseCheck(string accountPass)from"accessdb";
import void AcconuntDataBaseAuth(Critter&cr,string accountPass)from"accessdb";

void unsafe_getaccess(Critter&player,int param0,int param1,int param2,string@accountPass,int[]@param4)
{ 
	
	AcconuntDataBaseAuth(player,accountPass);
}
